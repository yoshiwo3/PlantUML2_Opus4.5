# Session 2026-01-01: Mode幅設計の問題分析

## 分析対象
`docs/evidence/20251224_1955_ui_design_login/wireframes/04_editor/05_sequence_diagram_spec.md`

## 発見した問題

### 1. Mode 2の950pxはリサイザー制約(max:800px)を超えている
- §2.3 リサイザー: GUIパネル min:200px, max:800px
- §3.1 Mode 2: 950px ← 制約違反

### 2. 概念の混同
- モードの本質は「パネル構成」（GUI+Code+Preview vs GUI+Preview）
- 現在は「固定幅」として機能制限を設けている（誤り）

### 3. リサイザーとの整合性欠如
- Mode 1でもリサイザーで800pxまで拡大可能
- 「600px固定」という前提で機能制限する意味がない

## ユーザー指摘
- Mode 1でメッセージ並び替えできるべき
- リサイザーで動的に幅変更できるのに固定幅前提はおかしい

## 推奨解決策: A案（幅ベースの動的機能制御）

| 操作 | 幅200-399px | 幅400px以上 |
|------|:-----------:|:-----------:|
| メッセージ並び替え | ✅ メニュー | ✅ D&D |
| メッセージ編集 | ✅ インライン | ✅ インライン |

**ポイント**: 全幅で機能は有効（UIの表現方法が変わるだけ）

## 修正対象セクション
- §3.1, §3.2, §3.3, §6.4, §6.5, §6.8

## ステータス
- ✅ B案採用・実装完了 (v3.11 → v3.12)

## 実施した変更（2026-01-01）
- §3.1: モード定義を「パネル構成」に再定義、固定幅→リサイザー調整可能
- §3.2: Layer構造からMode幅削除
- §3.3: 操作権限マトリクスをLayer1/Layer2の2層に簡素化
- §6.4/§6.5: UI統合（D&Dハンドル☰/編集ボタン✏を常時表示）
- §6.5-§6.9: リナンバリング
- §6.7: D&D仕様からMode別対応を削除（常時有効）
- §4.2,§5.4,§7.5,§7.8,§8.1,§8.5,§9.4,§10.4,§10.5,§11.11,§12: 固定幅記述を削除
- Git commit: e5f1989
