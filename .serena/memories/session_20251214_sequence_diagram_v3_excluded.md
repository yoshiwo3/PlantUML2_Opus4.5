# セッション記録: シーケンス図 v3除外（14本確定版）

## 作業日時
2025-12-14

## 変更内容
v3（バージョン管理 UC 3-7, 3-8）をシーケンス図作成対象から除外

## 最終結論: 14本（v3除外）

### MVP必須（8本）

| # | シーケンス図名 | 対応UC | 外部システム | 状況 |
|:-:|---------------|--------|-------------|:----:|
| 1 | 認証フロー | UC 1-1, 1-2 | Supabase Auth | ✅ 完了 |
| 2 | プロジェクトCRUD | UC 2-1〜2-4 | Supabase Storage | 🔴 要作成 |
| 3 | 図表作成 | UC 3-1 | Storage + node-plantuml | 🔴 要作成 |
| 4 | 編集プレビュー | UC 3-3, 3-4 | OpenRouter + node-plantuml | 🔴 要作成 |
| 5 | 保存 | UC 3-5 | Storage + OpenRouter | 🔴 要作成 |
| 6 | エクスポート | UC 3-6 | node-plantuml | 🔴 要作成 |
| 7 | 図表削除 | UC 3-9 | Supabase Storage | 🔴 要作成 |
| 8 | AI Question-Start | UC 4-1 | OpenRouter (streaming) | 🔴 要作成 |

### Phase 2（6本）

| # | シーケンス図名 | 対応UC | 外部システム | 状況 |
|:-:|---------------|--------|-------------|:----:|
| 9 | AIチャット | UC 4-2 | OpenRouter | 🔴 要作成 |
| 10 | 学習コンテンツ検索 | UC 3-10 | pgvector + OpenRouter | 🔴 要作成 |
| 11 | ユーザー管理 | UC 5-1 | Supabase Auth Admin | 🔴 要作成 |
| 12 | LLMモデル登録 | UC 5-2 | OpenRouter Models API | 🔴 要作成 |
| 13 | LLM使用量監視 | UC 5-7 | OpenRouter API | 🔴 要作成 |
| 14 | 学習コンテンツ登録 | UC 5-11 | OpenAI Embedding + pgvector | 🔴 要作成 |

### v3除外（1本）

| シーケンス図名 | 対応UC | 除外理由 |
|---------------|--------|---------|
| バージョン管理 | UC 3-7, 3-8 | v3フェーズで作成予定 |

## 進捗サマリ

| カテゴリ | 必要数 | 完了 | 残り |
|---------|:-----:|:---:|:---:|
| MVP必須 | 8 | 1 | 7 |
| Phase 2 | 6 | 0 | 6 |
| **合計** | **14** | **1** | **13** |

## 更新したファイル

- `docs/context/active_context.md`: 1/15→1/14、v3セクション削除
- `CLAUDE.md`: 1/15→1/14、v3セクション削除

## 備考

- バージョン管理機能（UC 3-7, 3-8）はSupabase Database必須のためv3フェーズで実装
- 業務フロー図3.7（バージョン管理フロー）は既に完了済み（シーケンス図のみv3）
