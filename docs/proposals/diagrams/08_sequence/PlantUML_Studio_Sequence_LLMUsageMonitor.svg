<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2786px" preserveAspectRatio="none" style="width:1065px;height:2786px;background:#FFFFFF;" version="1.1" viewBox="0 0 1065 2786" width="1065px" zoomAndPan="magnify"><title>LLM&#20351;&#29992;&#37327;&#30435;&#35222;&#12501;&#12525;&#12540;&#65288;UC 5-7&#65289;</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="217.4854" x="420.033" y="29.5332">LLM&#20351;&#29992;&#37327;&#30435;&#35222;&#12501;&#12525;&#12540;&#65288;UC 5-7&#65289;</text><g><title>&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="1342.9766" style="stroke:#181818;stroke-width:1;" width="10" x="255.6621" y="215.5313"/></g><g><title>&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="1035.1641" style="stroke:#181818;stroke-width:1;" width="10" x="255.6621" y="1641.5625"/></g><g><title>API Routes</title><rect fill="#FFFFFF" height="1296.2734" style="stroke:#181818;stroke-width:1;" width="10" x="503.9863" y="262.2344"/></g><g><title>API Routes</title><rect fill="#FFFFFF" height="988.4609" style="stroke:#181818;stroke-width:1;" width="10" x="503.9863" y="1688.2656"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="307.2734" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="657.8281"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="176.4609" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="1948.9141"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="176.4609" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="2171.5625"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="123.7578" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="2394.2109"/></g><g><title>OpenRouter API</title><rect fill="#FFFFFF" height="141.1094" style="stroke:#181818;stroke-width:1;" width="10" x="842.583" y="1027.6406"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="855.3438"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2064.6719"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2287.3203"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2457.2656"/></g><rect fill="none" height="1145.5156" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="1038.5513" x="10" y="405.9922"/><rect fill="none" height="741.5703" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="614.5405" x="424.0107" y="617.125"/><rect fill="none" height="223.6484" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="481.9341" x="434.0107" y="1128.0469"/><rect fill="none" height="906.7578" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="1038.5513" x="10" y="1762.9688"/><rect fill="none" height="617.7578" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="604.5405" x="434.0107" y="1908.2109"/><g><title>&#38283;&#30330;&#32773;</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="58.6621" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="138.8281" y2="2686.7266"/></g><g><title>&#12502;&#12521;&#12454;&#12470;</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="256.6621" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="259.7656" x2="259.7656" y1="138.8281" y2="2686.7266"/></g><g><title>API Routes</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="504.9863" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="508.0107" x2="508.0107" y1="138.8281" y2="2686.7266"/></g><g><title>IUsageLogRepository</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="700.9043" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="704.5874" x2="704.5874" y1="138.8281" y2="2686.7266"/></g><g><title>OpenRouter API</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="843.583" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="847.2212" x2="847.2212" y1="138.8281" y2="2686.7266"/></g><g><title>Supabase DB</title><rect fill="#000000" fill-opacity="0.00000" height="2547.8984" width="8" x="968.248" y="138.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="971.9448" x2="971.9448" y1="138.8281" y2="2686.7266"/></g><g class="participant participant-head" data-participant="Developer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="38.6621" y="118.1426">&#38283;&#30330;&#32773;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.3242" x="20" y="135.752">(&#31649;&#29702;&#32773;&#27177;&#38480;)</text><ellipse cx="62.6621" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62.6621,60.1094 L62.6621,87.1094 M49.6621,68.1094 L75.6621,68.1094 M62.6621,87.1094 L49.6621,102.1094 M62.6621,87.1094 L75.6621,102.1094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Developer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="38.6621" y="2700.2598">&#38283;&#30330;&#32773;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.3242" x="20" y="2717.8691">(&#31649;&#29702;&#32773;&#27177;&#38480;)</text><ellipse cx="62.6621" cy="2729.4453" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62.6621,2737.4453 L62.6621,2764.4453 M49.6621,2745.4453 L75.6621,2745.4453 M62.6621,2764.4453 L49.6621,2779.4453 M62.6621,2764.4453 L75.6621,2779.4453" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Browser"><rect fill="#E3F2FD" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="105.793" x="207.7656" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="232.6621" y="110.1426">&#12502;&#12521;&#12454;&#12470;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.793" x="214.7656" y="127.752">(Next.js Client)</text></g><g class="participant participant-tail" data-participant="Browser"><rect fill="#E3F2FD" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="105.793" x="207.7656" y="2685.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="232.6621" y="2707.2598">&#12502;&#12521;&#12454;&#12470;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.793" x="214.7656" y="2724.8691">(Next.js Client)</text></g><g class="participant participant-head" data-participant="APIRoutes"><rect fill="#FFF3E0" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="129.9512" x="444.0107" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8135" x="473.5796" y="110.1426">API Routes</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.9512" x="451.0107" y="127.752">(/api/admin/usage)</text></g><g class="participant participant-tail" data-participant="APIRoutes"><rect fill="#FFF3E0" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="129.9512" x="444.0107" y="2685.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8135" x="473.5796" y="2707.2598">API Routes</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.9512" x="451.0107" y="2724.8691">(/api/admin/usage)</text></g><g class="participant participant-head" data-participant="UsageLogRepo"><rect fill="#E8F5E9" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="148.6338" x="630.5874" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.6338" x="637.5874" y="110.1426">IUsageLogRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.3789" x="654.7148" y="127.752">(Supabase&#23455;&#35013;)</text></g><g class="participant participant-tail" data-participant="UsageLogRepo"><rect fill="#E8F5E9" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="148.6338" x="630.5874" y="2685.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.6338" x="637.5874" y="2707.2598">IUsageLogRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.3789" x="654.7148" y="2724.8691">(Supabase&#23455;&#35013;)</text></g><g class="participant participant-head" data-participant="OpenRouter"><rect fill="#F3E5F5" height="31.6094" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="116.7236" x="789.2212" y="106.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.7236" x="796.2212" y="127.752">OpenRouter API</text></g><g class="participant participant-tail" data-participant="OpenRouter"><rect fill="#F3E5F5" height="31.6094" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="116.7236" x="789.2212" y="2685.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.7236" x="796.2212" y="2707.2598">OpenRouter API</text></g><g class="participant participant-head" data-participant="SupabaseDB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3926" x="926.0518" y="118.1426">Supabase DB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.6064" x="915.9448" y="135.752">(llm_usage_logs)</text><path d="M954.248,67.6094 C954.248,57.6094 972.248,57.6094 972.248,57.6094 C972.248,57.6094 990.248,57.6094 990.248,67.6094 L990.248,93.6094 C990.248,103.6094 972.248,103.6094 972.248,103.6094 C972.248,103.6094 954.248,103.6094 954.248,93.6094 L954.248,67.6094" fill="#E1F5FE" style="stroke:#181818;stroke-width:1.5;"/><path d="M954.248,67.6094 C954.248,77.6094 972.248,77.6094 972.248,77.6094 C972.248,77.6094 990.248,77.6094 990.248,67.6094" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="SupabaseDB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3926" x="926.0518" y="2700.2598">Supabase DB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.6064" x="915.9448" y="2717.8691">(llm_usage_logs)</text><path d="M954.248,2730.9453 C954.248,2720.9453 972.248,2720.9453 972.248,2720.9453 C972.248,2720.9453 990.248,2720.9453 990.248,2730.9453 L990.248,2756.9453 C990.248,2766.9453 972.248,2766.9453 972.248,2766.9453 C972.248,2766.9453 954.248,2766.9453 954.248,2756.9453 L954.248,2730.9453" fill="#E1F5FE" style="stroke:#181818;stroke-width:1.5;"/><path d="M954.248,2730.9453 C954.248,2740.9453 972.248,2740.9453 972.248,2740.9453 C972.248,2740.9453 990.248,2740.9453 990.248,2730.9453" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g><title>&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="1342.9766" style="stroke:#181818;stroke-width:1;" width="10" x="255.6621" y="215.5313"/></g><g><title>&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="1035.1641" style="stroke:#181818;stroke-width:1;" width="10" x="255.6621" y="1641.5625"/></g><g><title>API Routes</title><rect fill="#FFFFFF" height="1296.2734" style="stroke:#181818;stroke-width:1;" width="10" x="503.9863" y="262.2344"/></g><g><title>API Routes</title><rect fill="#FFFFFF" height="988.4609" style="stroke:#181818;stroke-width:1;" width="10" x="503.9863" y="1688.2656"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="307.2734" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="657.8281"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="176.4609" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="1948.9141"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="176.4609" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="2171.5625"/></g><g><title>IUsageLogRepository</title><rect fill="#FFFFFF" height="123.7578" style="stroke:#181818;stroke-width:1;" width="10" x="699.9043" y="2394.2109"/></g><g><title>OpenRouter API</title><rect fill="#FFFFFF" height="141.1094" style="stroke:#181818;stroke-width:1;" width="10" x="842.583" y="1027.6406"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="855.3438"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2064.6719"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2287.3203"/></g><g><title>Supabase DB</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="967.248" y="2457.2656"/></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="1058.5513" x="0" y="170.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1058.5513" y1="170.0039" y2="170.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1058.5513" y1="173.0039" y2="173.0039"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="199.834" x="429.3586" y="158.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182.2222" x="435.3586" y="176.3232">&#21021;&#26399;&#35501;&#36796;: &#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;&#34920;&#31034;</text><g class="message" data-participant-1="Developer" data-participant-2="Browser"><polygon fill="#181818" points="243.6621,211.5313,253.6621,215.5313,243.6621,219.5313,247.6621,215.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="62.6621" x2="249.6621" y1="215.5313" y2="215.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="69.6621" y="210.6748">&#12300;&#20351;&#29992;&#37327;&#30435;&#35222;&#12301;&#12434;&#12463;&#12522;&#12483;&#12463;</text></g><g class="message" data-participant-1="Browser" data-participant-2="APIRoutes"><polygon fill="#181818" points="491.9863,258.2344,501.9863,262.2344,491.9863,266.2344,495.9863,262.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="265.6621" x2="497.9863" y1="262.2344" y2="262.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.7236" x="272.6621" y="241.0264">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="299.3857" y="241.0264">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.0107" x="302.9976" y="241.0264">/api/admin/usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.6489" x="272.6621" y="257.3779">?period=30d</text></g><g class="message" data-participant-1="APIRoutes" data-participant-2="APIRoutes"><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="555.9863" y1="308.9375" y2="308.9375"/><line style="stroke:#181818;stroke-width:2;" x1="555.9863" x2="555.9863" y1="308.9375" y2="321.9375"/><line style="stroke:#181818;stroke-width:2;" x1="514.9863" x2="555.9863" y1="321.9375" y2="321.9375"/><polygon fill="#181818" points="524.9863,317.9375,514.9863,321.9375,524.9863,325.9375,520.9863,321.9375" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="520.9863" y="287.7295">&#12475;&#12483;&#12471;&#12519;&#12531;&#26908;&#35388;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="520.9863" y="304.0811">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="528.5781" y="304.0811">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="532.1899" y="304.0811">&#31649;&#29702;&#32773;&#27177;&#38480;&#30906;&#35469;</text></g><path d="M410,339.9375 L410,388.9375 A5,5 0 0 0 415,393.9375 L601,393.9375 A5,5 0 0 0 606,388.9375 L606,344.9375 L596,334.9375 L415,334.9375 A5,5 0 0 0 410,339.9375" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M596,334.9375 L596,342.4375 A2.5,2.5 0 0 0 598.5,344.9375 L606,344.9375 L596,334.9375" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149.1509" x="416" y="353.4326">&#27177;&#38480;&#12481;&#12455;&#12483;&#12463;&#65288;LL-015&#65289;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.9409" x="416" y="369.7842">- &#35469;&#35388;&#28168;&#12415;&#12391;&#12354;&#12427;&#12371;&#12392;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.1064" x="416" y="386.1357">- role = 'developer' &#12391;&#12354;&#12427;&#12371;&#12392;</text><path d="M15,405.9922 L70.1709,405.9922 L70.1709,414.3438 L60.1709,424.3438 L10,424.3438 L10,410.9922 A5,5 0 0 1 15,405.9922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1145.5156" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="1038.5513" x="10" y="405.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="25" y="420.4873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="62.7666" x="85.1709" y="419.4111">[&#26410;&#35469;&#35388; 401]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="Browser"><polygon fill="#181818" points="276.6621,442.6953,266.6621,446.6953,276.6621,450.6953,272.6621,446.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="270.6621" x2="502.9863" y1="446.6953" y2="446.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21.6899" x="282.6621" y="441.8389">401</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="304.3521" y="441.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.2764" x="307.9639" y="441.8389">UNAUTHORIZED</text></g><g class="message" data-participant-1="Browser" data-participant-2="Developer"><polygon fill="#181818" points="73.6621,473.0469,63.6621,477.0469,73.6621,481.0469,69.6621,477.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="67.6621" x2="254.6621" y1="477.0469" y2="477.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="79.6621" y="472.1904">&#12525;&#12464;&#12452;&#12531;&#30011;&#38754;&#12408;&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1048.5513" y1="486.0469" y2="486.0469"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74.1104" x="15" y="497.4658">[&#27177;&#38480;&#12394;&#12375; 403]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="Browser"><polygon fill="#181818" points="276.6621,551.9375,266.6621,555.9375,276.6621,559.9375,272.6621,555.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="270.6621" x2="502.9863" y1="555.9375" y2="555.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21.6899" x="282.6621" y="518.3779">403</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="304.3521" y="518.3779">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.5591" x="307.9639" y="518.3779">FORBIDDEN</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="282.6621" y="534.7295">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="287.0039" y="534.7295">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31.0591" x="290.6157" y="534.7295">error:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.5503" x="282.6621" y="551.0811">"DEVELOPER_REQUIRED"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="447.2124" y="551.0811">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="450.8242" y="551.0811">}</text></g><g class="message" data-participant-1="Browser" data-participant-2="Developer"><polygon fill="#181818" points="73.6621,582.2891,63.6621,586.2891,73.6621,590.2891,69.6621,586.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="67.6621" x2="254.6621" y1="586.2891" y2="586.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="79.6621" y="581.4326">&#12300;&#38283;&#30330;&#32773;&#27177;&#38480;&#12364;&#24517;&#35201;&#12391;&#12377;&#12301;</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1048.5513" y1="595.2891" y2="595.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80.5449" x="15" y="606.708">[&#35469;&#35388;&#12539;&#27177;&#38480;OK]</text><path d="M429.0107,617.125 L489.2407,617.125 L489.2407,625.4766 L479.2407,635.4766 L424.0107,635.4766 L424.0107,622.125 A5,5 0 0 1 429.0107,617.125" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="741.5703" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="614.5405" x="424.0107" y="617.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.23" x="439.0107" y="631.6201">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75.3887" x="504.2407" y="630.5439">[&#20869;&#37096;&#12525;&#12464;&#21462;&#24471;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="687.9043,653.8281,697.9043,657.8281,687.9043,661.8281,691.9043,657.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="693.9043" y1="657.8281" y2="657.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.6162" x="520.9863" y="652.9717">getByPeriod(period)</text></g><path d="M558,675.8281 L558,707.8281 A5,5 0 0 0 563,712.8281 L846,712.8281 A5,5 0 0 0 851,707.8281 L851,680.8281 L841,670.8281 L563,670.8281 A5,5 0 0 0 558,675.8281" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M841,670.8281 L841,678.3281 A2.5,2.5 0 0 0 843.5,680.8281 L851,680.8281 L841,670.8281" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105.7393" x="564" y="689.3232">&#12463;&#12521;&#12473;&#22259;v1.8&#28310;&#25312;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.4287" x="564" y="705.6748">getByPeriod(period: DateRange): UsageReport</text><g class="message" data-participant-1="UsageLogRepo" data-participant-2="SupabaseDB"><polygon fill="#181818" points="955.248,851.3438,965.248,855.3438,955.248,859.3438,959.248,855.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="709.9043" x2="961.248" y1="855.3438" y2="855.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.5718" x="716.9043" y="736.0264">SELECT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="767.4761" y="736.0264">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.46" x="771.0879" y="736.0264">SUM(tokens),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="716.9043" y="752.3779">SUM(cost),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.3672" x="716.9043" y="768.7295">model_id,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="773.2715" y="768.7295">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.8862" x="776.8833" y="768.7295">feature_type,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.7617" x="716.9043" y="785.0811">DATE(created_at)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.27" x="716.9043" y="801.4326">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="755.1743" y="801.4326">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3335" x="758.7861" y="801.4326">llm_usage_logs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3882" x="716.9043" y="817.7842">WHERE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="765.2925" y="817.7842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4326" x="768.9043" y="817.7842">created_at</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="830.3369" y="817.7842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15.1836" x="833.9487" y="817.7842">&gt;=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="849.1323" y="817.7842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="852.7441" y="817.7842">?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.6709" x="716.9043" y="834.1357">GROUP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="764.5752" y="834.1357">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17.3418" x="768.187" y="834.1357">BY</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="785.5288" y="834.1357">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.3672" x="789.1406" y="834.1357">model_id,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.8862" x="716.9043" y="850.4873">feature_type,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="792.7905" y="850.4873">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.7617" x="796.4023" y="850.4873">DATE(created_at)</text></g><g class="message" data-participant-1="SupabaseDB" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="720.9043,881.6953,710.9043,885.6953,720.9043,889.6953,716.9043,885.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="714.9043" x2="971.248" y1="885.6953" y2="885.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.7217" x="726.9043" y="880.8389">usage_logs[]</text></g><g class="message" data-participant-1="UsageLogRepo" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,961.1016,514.9863,965.1016,524.9863,969.1016,520.9863,965.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="703.9043" y1="965.1016" y2="965.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.5972" x="530.9863" y="911.1904">UsageReport</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="530.9863" y="927.542">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="535.3281" y="927.542">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.8145" x="538.9399" y="927.542">totalTokens,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="609.7544" y="927.542">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.9136" x="613.3662" y="927.542">totalCost,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.2236" x="530.9863" y="943.8936">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.9727" x="538.21" y="943.8936">byModel[],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="598.1826" y="943.8936">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.3672" x="601.7944" y="943.8936">byFeature[],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.2236" x="530.9863" y="960.2451">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.9199" x="538.21" y="960.2451">dailyTrend[]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="606.1299" y="960.2451">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="609.7417" y="960.2451">}</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="424.0107" x2="1038.5513" y1="974.1016" y2="974.1016"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116.2573" x="429.0107" y="985.5205">[OpenRouter&#27531;&#39640;&#21462;&#24471;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="OpenRouter"><polygon fill="#181818" points="830.583,1023.6406,840.583,1027.6406,830.583,1031.6406,834.583,1027.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="836.583" y1="1027.6406" y2="1027.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.7236" x="520.9863" y="1006.4326">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="547.71" y="1006.4326">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.1436" x="551.3218" y="1006.4326">/api/v1/key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8208" x="520.9863" y="1022.7842">(Authorization:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="604.8071" y="1022.7842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39.019" x="608.4189" y="1022.7842">Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="647.438" y="1022.7842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.5254" x="651.0498" y="1022.7842">API_KEY)</text></g><path d="M737,1045.6406 L737,1110.6406 A5,5 0 0 0 742,1115.6406 L952,1115.6406 A5,5 0 0 0 957,1110.6406 L957,1050.6406 L947,1040.6406 L742,1040.6406 A5,5 0 0 0 737,1045.6406" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M947,1040.6406 L947,1048.1406 A2.5,2.5 0 0 0 949.5,1050.6406 L957,1050.6406 L947,1040.6406" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159.269" x="743" y="1059.1357">DP-001: &#12524;&#12472;&#12522;&#12456;&#12531;&#12473;&#35373;&#23450;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.2554" x="743" y="1075.4873">- timeout: 10&#31186;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.418" x="743" y="1091.8389">- retry: 2&#22238;&#65288;exponential backoff&#65289;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.2427" x="743" y="1108.1904">- fallback: &#27531;&#39640;&#19981;&#26126;&#12391;&#32153;&#32154;</text><path d="M439.0107,1128.0469 L494.1816,1128.0469 L494.1816,1136.3984 L484.1816,1146.3984 L434.0107,1146.3984 L434.0107,1133.0469 A5,5 0 0 1 439.0107,1128.0469" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="223.6484" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="481.9341" x="434.0107" y="1128.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="449.0107" y="1142.542">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146.5073" x="509.1816" y="1141.4658">[&#12469;&#12540;&#12499;&#12473;&#38556;&#23475;/&#12479;&#12452;&#12512;&#12450;&#12454;&#12488;]</text><g class="message" data-participant-1="OpenRouter" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,1164.75,514.9863,1168.75,524.9863,1172.75,520.9863,1168.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="846.583" y1="1168.75" y2="1168.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.2363" x="530.9863" y="1163.8936">ServiceError</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="603.2227" y="1163.8936">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="606.8345" y="1163.8936">/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="610.4463" y="1163.8936">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.96" x="614.0581" y="1163.8936">Timeout</text></g><path d="M518,1186.75 L518,1235.75 A5,5 0 0 0 523,1240.75 L690,1240.75 A5,5 0 0 0 695,1235.75 L695,1191.75 L685,1181.75 L523,1181.75 A5,5 0 0 0 518,1186.75" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M685,1181.75 L685,1189.25 A2.5,2.5 0 0 0 687.5,1191.75 L695,1191.75 L685,1181.75" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.6563" x="524" y="1200.2451">&#12501;&#12457;&#12540;&#12523;&#12496;&#12483;&#12463;&#20966;&#29702;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.4399" x="524" y="1216.5967">&#27531;&#39640;&#24773;&#22577;=null &#12392;&#12375;&#12390;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="524" y="1232.9482">&#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;&#34920;&#31034;&#12399;&#32153;&#32154;</text><g class="message" data-participant-1="APIRoutes" data-participant-2="APIRoutes"><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="555.9863" y1="1284.5078" y2="1284.5078"/><line style="stroke:#181818;stroke-width:2;" x1="555.9863" x2="555.9863" y1="1284.5078" y2="1297.5078"/><line style="stroke:#181818;stroke-width:2;" x1="514.9863" x2="555.9863" y1="1297.5078" y2="1297.5078"/><polygon fill="#181818" points="524.9863,1293.5078,514.9863,1297.5078,524.9863,1301.5078,520.9863,1297.5078" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.4727" x="520.9863" y="1263.2998">creditInfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="574.459" y="1263.2998">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="578.0708" y="1263.2998">=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="585.6626" y="1263.2998">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20.2363" x="589.2744" y="1263.2998">null</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.6582" x="520.9863" y="1279.6514">(&#27531;&#39640;&#19981;&#26126;&#12501;&#12521;&#12464;&#35373;&#23450;)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="434.0107" x2="915.9448" y1="1306.5078" y2="1306.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="30.0137" x="439.0107" y="1317.9268">[&#27491;&#24120;]</text><g class="message" data-participant-1="OpenRouter" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,1339.6953,514.9863,1343.6953,524.9863,1347.6953,520.9863,1343.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="846.583" y1="1343.6953" y2="1343.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="530.9863" y="1338.8389">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="535.3281" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.9136" x="538.9399" y="1338.8389">data:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="567.8535" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="571.4653" y="1338.8389">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="575.8071" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41.9009" x="579.4189" y="1338.8389">credits,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="621.3198" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35.4199" x="624.9316" y="1338.8389">usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="660.3516" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="663.9634" y="1338.8389">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="668.3052" y="1338.8389">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="671.917" y="1338.8389">}</text></g><g class="message" data-participant-1="APIRoutes" data-participant-2="Browser"><polygon fill="#181818" points="276.6621,1400.3984,266.6621,1404.3984,276.6621,1408.3984,272.6621,1404.3984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="270.6621" x2="502.9863" y1="1404.3984" y2="1404.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21.6899" x="282.6621" y="1383.1904">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="304.3521" y="1383.1904">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.7827" x="307.9639" y="1383.1904">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="282.6621" y="1399.542">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="287.0039" y="1399.542">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.0508" x="290.6157" y="1399.542">usageReport,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="368.6665" y="1399.542">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.4727" x="372.2783" y="1399.542">creditInfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="425.751" y="1399.542">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="429.3628" y="1399.542">}</text></g><g class="message" data-participant-1="Browser" data-participant-2="Browser"><line style="stroke:#181818;stroke-width:2;" x1="265.6621" x2="307.6621" y1="1500.1563" y2="1500.1563"/><line style="stroke:#181818;stroke-width:2;" x1="307.6621" x2="307.6621" y1="1500.1563" y2="1513.1563"/><line style="stroke:#181818;stroke-width:2;" x1="266.6621" x2="307.6621" y1="1513.1563" y2="1513.1563"/><polygon fill="#181818" points="276.6621,1509.1563,266.6621,1513.1563,276.6621,1517.1563,272.6621,1513.1563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="272.6621" y="1429.8936">&#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;&#34920;&#31034;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3291" x="272.6621" y="1446.2451">-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="276.9912" y="1446.2451">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="280.603" y="1446.2451">&#12463;&#12524;&#12472;&#12483;&#12488;&#27531;&#39640;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3291" x="272.6621" y="1462.5967">-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="276.9912" y="1462.5967">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="280.603" y="1462.5967">&#26399;&#38291;&#21029;&#20351;&#29992;&#37327;&#12464;&#12521;&#12501;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3291" x="272.6621" y="1478.9482">-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="276.9912" y="1478.9482">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="280.603" y="1478.9482">&#12514;&#12487;&#12523;&#21029;&#12467;&#12473;&#12488;&#20869;&#35379;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3291" x="272.6621" y="1495.2998">-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="276.9912" y="1495.2998">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="280.603" y="1495.2998">&#27231;&#33021;&#21029;&#12488;&#12540;&#12463;&#12531;&#25968;</text></g><g class="message" data-participant-1="Browser" data-participant-2="Developer"><polygon fill="#181818" points="73.6621,1539.5078,63.6621,1543.5078,73.6621,1547.5078,69.6621,1543.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="67.6621" x2="254.6621" y1="1543.5078" y2="1543.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="79.6621" y="1538.6514">&#20351;&#29992;&#37327;&#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;&#34920;&#31034;</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="1058.5513" x="0" y="1579.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1058.5513" y1="1579.6836" y2="1579.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1058.5513" y1="1582.6836" y2="1582.6836"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="253.459" x="402.5461" y="1568.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="235.8472" x="408.5461" y="1586.0029">&#35443;&#32048;&#12501;&#12451;&#12523;&#12479;: &#26399;&#38291;&#12539;&#12514;&#12487;&#12523;&#12539;&#12518;&#12540;&#12470;&#12540;</text><g class="message" data-participant-1="Developer" data-participant-2="Browser"><polygon fill="#181818" points="243.6621,1637.5625,253.6621,1641.5625,243.6621,1645.5625,247.6621,1641.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="62.6621" x2="249.6621" y1="1641.5625" y2="1641.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="69.6621" y="1620.3545">&#12501;&#12451;&#12523;&#12479;&#26465;&#20214;&#12434;&#22793;&#26356;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.8818" x="69.6621" y="1636.7061">(&#26399;&#38291;/&#12514;&#12487;&#12523;/&#12518;&#12540;&#12470;&#12540;)</text></g><g class="message" data-participant-1="Browser" data-participant-2="APIRoutes"><polygon fill="#181818" points="491.9863,1684.2656,501.9863,1688.2656,491.9863,1692.2656,495.9863,1688.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="265.6621" x2="497.9863" y1="1688.2656" y2="1688.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.7236" x="272.6621" y="1667.0576">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="299.3857" y="1667.0576">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.0107" x="302.9976" y="1667.0576">/api/admin/usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.3242" x="272.6621" y="1683.4092">?period=7d&amp;modelId=xxx&amp;userId=yyy</text></g><g class="message" data-participant-1="APIRoutes" data-participant-2="APIRoutes"><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="555.9863" y1="1734.9688" y2="1734.9688"/><line style="stroke:#181818;stroke-width:2;" x1="555.9863" x2="555.9863" y1="1734.9688" y2="1747.9688"/><line style="stroke:#181818;stroke-width:2;" x1="514.9863" x2="555.9863" y1="1747.9688" y2="1747.9688"/><polygon fill="#181818" points="524.9863,1743.9688,514.9863,1747.9688,524.9863,1751.9688,520.9863,1747.9688" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="520.9863" y="1713.7607">&#12475;&#12483;&#12471;&#12519;&#12531;&#26908;&#35388;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="520.9863" y="1730.1123">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="528.5781" y="1730.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="532.1899" y="1730.1123">&#31649;&#29702;&#32773;&#27177;&#38480;&#30906;&#35469;</text></g><path d="M15,1762.9688 L70.1709,1762.9688 L70.1709,1771.3203 L60.1709,1781.3203 L10,1781.3203 L10,1767.9688 A5,5 0 0 1 15,1762.9688" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="906.7578" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="1038.5513" x="10" y="1762.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="25" y="1777.4639">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.7886" x="85.1709" y="1776.3877">[&#26410;&#35469;&#35388;/&#27177;&#38480;&#12394;&#12375;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="Browser"><polygon fill="#181818" points="276.6621,1799.6719,266.6621,1803.6719,276.6621,1807.6719,272.6621,1803.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="270.6621" x2="502.9863" y1="1803.6719" y2="1803.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.9917" x="282.6621" y="1798.8154">401/403</text></g><g class="message" data-participant-1="Browser" data-participant-2="Developer"><polygon fill="#181818" points="73.6621,1830.0234,63.6621,1834.0234,73.6621,1838.0234,69.6621,1834.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="67.6621" x2="254.6621" y1="1834.0234" y2="1834.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="79.6621" y="1829.167">&#12456;&#12521;&#12540;&#34920;&#31034;</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1048.5513" y1="1843.0234" y2="1843.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80.5449" x="15" y="1854.4424">[&#35469;&#35388;&#12539;&#27177;&#38480;OK]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="APIRoutes"><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="555.9863" y1="1880.2109" y2="1880.2109"/><line style="stroke:#181818;stroke-width:2;" x1="555.9863" x2="555.9863" y1="1880.2109" y2="1893.2109"/><line style="stroke:#181818;stroke-width:2;" x1="514.9863" x2="555.9863" y1="1893.2109" y2="1893.2109"/><polygon fill="#181818" points="524.9863,1889.2109,514.9863,1893.2109,524.9863,1897.2109,520.9863,1893.2109" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="520.9863" y="1875.3545">&#12501;&#12451;&#12523;&#12479;&#12497;&#12521;&#12513;&#12540;&#12479;&#35299;&#26512;</text></g><path d="M439.0107,1908.2109 L494.1816,1908.2109 L494.1816,1916.5625 L484.1816,1926.5625 L434.0107,1926.5625 L434.0107,1913.2109 A5,5 0 0 1 439.0107,1908.2109" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="617.7578" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="604.5405" x="434.0107" y="1908.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="449.0107" y="1922.7061">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132.1074" x="509.1816" y="1921.6299">[&#12514;&#12487;&#12523;&#12501;&#12451;&#12523;&#12479;&#25351;&#23450;&#12354;&#12426;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="687.9043,1944.9141,697.9043,1948.9141,687.9043,1952.9141,691.9043,1948.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="693.9043" y1="1948.9141" y2="1948.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.8398" x="520.9863" y="1944.0576">getByModel(modelId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="643.8262" y="1944.0576">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.4663" x="647.438" y="1944.0576">period)</text></g><path d="M517,1966.9141 L517,1998.9141 A5,5 0 0 0 522,2003.9141 L887,2003.9141 A5,5 0 0 0 892,1998.9141 L892,1971.9141 L882,1961.9141 L522,1961.9141 A5,5 0 0 0 517,1966.9141" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M882,1961.9141 L882,1969.4141 A2.5,2.5 0 0 0 884.5,1971.9141 L892,1971.9141 L882,1961.9141" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105.7393" x="523" y="1980.4092">&#12463;&#12521;&#12473;&#22259;v1.8&#28310;&#25312;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354.8086" x="523" y="1996.7607">getByModel(modelId: String, period: DateRange): UsageLog[]</text><g class="message" data-participant-1="UsageLogRepo" data-participant-2="SupabaseDB"><polygon fill="#181818" points="955.248,2060.6719,965.248,2064.6719,955.248,2068.6719,959.248,2064.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="709.9043" x2="961.248" y1="2064.6719" y2="2064.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.5718" x="716.9043" y="2027.1123">SELECT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="767.4761" y="2027.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.0591" x="771.0879" y="2027.1123">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="776.147" y="2027.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.27" x="779.7588" y="2027.1123">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="818.0288" y="2027.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3335" x="821.6406" y="2027.1123">llm_usage_logs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3882" x="716.9043" y="2043.4639">WHERE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="765.2925" y="2043.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.7554" x="768.9043" y="2043.4639">model_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="821.6597" y="2043.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="825.2715" y="2043.4639">=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="832.8633" y="2043.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="836.4751" y="2043.4639">?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.4473" x="716.9043" y="2059.8154">AND</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="744.3516" y="2059.8154">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4326" x="747.9634" y="2059.8154">created_at</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="809.396" y="2059.8154">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15.1836" x="813.0078" y="2059.8154">&gt;=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="828.1914" y="2059.8154">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="831.8032" y="2059.8154">?</text></g><g class="message" data-participant-1="SupabaseDB" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="720.9043,2091.0234,710.9043,2095.0234,720.9043,2099.0234,716.9043,2095.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="714.9043" x2="971.248" y1="2095.0234" y2="2095.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.7217" x="726.9043" y="2090.167">usage_logs[]</text></g><g class="message" data-participant-1="UsageLogRepo" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,2121.375,514.9863,2125.375,524.9863,2129.375,520.9863,2125.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="703.9043" y1="2125.375" y2="2125.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.4917" x="530.9863" y="2120.5186">UsageLog[]</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="434.0107" x2="1038.5513" y1="2134.375" y2="2134.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143.4512" x="439.0107" y="2145.7939">[&#12518;&#12540;&#12470;&#12540;&#12501;&#12451;&#12523;&#12479;&#25351;&#23450;&#12354;&#12426;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="687.9043,2167.5625,697.9043,2171.5625,687.9043,2175.5625,691.9043,2171.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="693.9043" y1="2171.5625" y2="2171.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.7617" x="520.9863" y="2166.7061">getByUser(userId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="625.748" y="2166.7061">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.4663" x="629.3599" y="2166.7061">period)</text></g><path d="M527,2189.5625 L527,2221.5625 A5,5 0 0 0 532,2226.5625 L877,2226.5625 A5,5 0 0 0 882,2221.5625 L882,2194.5625 L872,2184.5625 L532,2184.5625 A5,5 0 0 0 527,2189.5625" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M872,2184.5625 L872,2192.0625 A2.5,2.5 0 0 0 874.5,2194.5625 L882,2194.5625 L872,2184.5625" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105.7393" x="533" y="2203.0576">&#12463;&#12521;&#12473;&#22259;v1.8&#28310;&#25312;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334.5469" x="533" y="2219.4092">getByUser(userId: UUID, period: DateRange): UsageLog[]</text><g class="message" data-participant-1="UsageLogRepo" data-participant-2="SupabaseDB"><polygon fill="#181818" points="955.248,2283.3203,965.248,2287.3203,955.248,2291.3203,959.248,2287.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="709.9043" x2="961.248" y1="2287.3203" y2="2287.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.5718" x="716.9043" y="2249.7607">SELECT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="767.4761" y="2249.7607">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.0591" x="771.0879" y="2249.7607">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="776.147" y="2249.7607">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.27" x="779.7588" y="2249.7607">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="818.0288" y="2249.7607">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3335" x="821.6406" y="2249.7607">llm_usage_logs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3882" x="716.9043" y="2266.1123">WHERE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="765.2925" y="2266.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.6372" x="768.9043" y="2266.1123">user_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="811.5415" y="2266.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="815.1533" y="2266.1123">=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="822.7451" y="2266.1123">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="826.3569" y="2266.1123">?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.4473" x="716.9043" y="2282.4639">AND</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="744.3516" y="2282.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4326" x="747.9634" y="2282.4639">created_at</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="809.396" y="2282.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15.1836" x="813.0078" y="2282.4639">&gt;=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="828.1914" y="2282.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="831.8032" y="2282.4639">?</text></g><g class="message" data-participant-1="SupabaseDB" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="720.9043,2313.6719,710.9043,2317.6719,720.9043,2321.6719,716.9043,2317.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="714.9043" x2="971.248" y1="2317.6719" y2="2317.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.7217" x="726.9043" y="2312.8154">usage_logs[]</text></g><g class="message" data-participant-1="UsageLogRepo" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,2344.0234,514.9863,2348.0234,524.9863,2352.0234,520.9863,2348.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="703.9043" y1="2348.0234" y2="2348.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.4917" x="530.9863" y="2343.167">UsageLog[]</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="434.0107" x2="1038.5513" y1="2357.0234" y2="2357.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52.7012" x="439.0107" y="2368.4424">[&#26399;&#38291;&#12398;&#12415;]</text><g class="message" data-participant-1="APIRoutes" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="687.9043,2390.2109,697.9043,2394.2109,687.9043,2398.2109,691.9043,2394.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="513.9863" x2="693.9043" y1="2394.2109" y2="2394.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.6162" x="520.9863" y="2389.3545">getByPeriod(period)</text></g><g class="message" data-participant-1="UsageLogRepo" data-participant-2="SupabaseDB"><polygon fill="#181818" points="955.248,2453.2656,965.248,2457.2656,955.248,2461.2656,959.248,2457.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="709.9043" x2="961.248" y1="2457.2656" y2="2457.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.5718" x="716.9043" y="2419.7061">SELECT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="767.4761" y="2419.7061">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10.8354" x="771.0879" y="2419.7061">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="781.9233" y="2419.7061">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.27" x="785.5352" y="2419.7061">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3335" x="716.9043" y="2436.0576">llm_usage_logs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3882" x="716.9043" y="2452.4092">WHERE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="765.2925" y="2452.4092">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4326" x="768.9043" y="2452.4092">created_at</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="830.3369" y="2452.4092">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15.1836" x="833.9487" y="2452.4092">&gt;=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="849.1323" y="2452.4092">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.23" x="852.7441" y="2452.4092">?</text></g><g class="message" data-participant-1="SupabaseDB" data-participant-2="UsageLogRepo"><polygon fill="#181818" points="720.9043,2483.6172,710.9043,2487.6172,720.9043,2491.6172,716.9043,2487.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="714.9043" x2="971.248" y1="2487.6172" y2="2487.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.7217" x="726.9043" y="2482.7607">usage_logs[]</text></g><g class="message" data-participant-1="UsageLogRepo" data-participant-2="APIRoutes"><polygon fill="#181818" points="524.9863,2513.9688,514.9863,2517.9688,524.9863,2521.9688,520.9863,2517.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="518.9863" x2="703.9043" y1="2517.9688" y2="2517.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.5972" x="530.9863" y="2513.1123">UsageReport</text></g><g class="message" data-participant-1="APIRoutes" data-participant-2="Browser"><polygon fill="#181818" points="276.6621,2567.6719,266.6621,2571.6719,276.6621,2575.6719,272.6621,2571.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="270.6621" x2="502.9863" y1="2571.6719" y2="2571.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21.6899" x="282.6621" y="2550.4639">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="304.3521" y="2550.4639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.7827" x="307.9639" y="2550.4639">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="282.6621" y="2566.8154">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="287.0039" y="2566.8154">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.479" x="290.6157" y="2566.8154">filteredData</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="357.0947" y="2566.8154">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="360.7065" y="2566.8154">}</text></g><g class="message" data-participant-1="Browser" data-participant-2="Browser"><line style="stroke:#181818;stroke-width:2;" x1="265.6621" x2="307.6621" y1="2618.375" y2="2618.375"/><line style="stroke:#181818;stroke-width:2;" x1="307.6621" x2="307.6621" y1="2618.375" y2="2631.375"/><line style="stroke:#181818;stroke-width:2;" x1="266.6621" x2="307.6621" y1="2631.375" y2="2631.375"/><polygon fill="#181818" points="276.6621,2627.375,266.6621,2631.375,276.6621,2635.375,272.6621,2631.375" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="272.6621" y="2597.167">&#12501;&#12451;&#12523;&#12479;&#32080;&#26524;&#34920;&#31034;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.27" x="272.6621" y="2613.5186">(&#12464;&#12521;&#12501;/&#12486;&#12540;&#12502;&#12523;&#26356;&#26032;)</text></g><g class="message" data-participant-1="Browser" data-participant-2="Developer"><polygon fill="#181818" points="73.6621,2657.7266,63.6621,2661.7266,73.6621,2665.7266,69.6621,2661.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="67.6621" x2="254.6621" y1="2661.7266" y2="2661.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="79.6621" y="2656.8701">&#12501;&#12451;&#12523;&#12479;&#32080;&#26524;&#34920;&#31034;</text></g><!--SRC=[vLXjKzjM5lwkNt66pfINOZ2mR5hFq0vWkMK2WNLWTxeXmoZuGbICnCg2XMOoWwKXSKAoOPk4b8I4419mQ25qILbAal9VzaQo-TJ-X9vxPLkICIRPRYUTMJ5ZBDrp7jtp_bnNjhpr9LG2DVvDpPVK-8wQszJumRgt7OBEpgxNh_Opjz87bszaxgraL-UfUPkQ6oY86dtjq1muuHEYnbSvkUG2DMPHo5hQi_VcGs0_sR1c5mhg20zDTH_LDTOrruBzT2bhldgzEvrTNSikfo4IQ0rt1O8dQd5JpwZvrDaEJ3JKVOY8zkF5RFfb2DfLHIUJ-WdeQk-10FJ49KNlw-g4q-HluqGP912MfM5D6aMLR7eZcqvHyv_Ks6T6ccXRk2SG33Ryz18VVqkDNMgkKoFjsFxJooj29NU9-tRxzdDhBcLFhsKUxMNNhuTm6Q2ZBo4DaqvrE4h6r8IigzfKtJ3HswPwY2QhiQen_W_V9UaaAYd3f3e4N8N9Qph0VnPdoWDrgJ4IhnfbdnsnMd00yoWeV-OiyEjOeBu4qQh6yQCiZ0lKFKQKg3gk4wqzBXD5PoZj6ed9Ug8A5Psl7SgG2aTSFo_TkWxP_LVMrOVsZJbxEILK_XTvAIH6P6LCmZ128XVNLarJ_zvxNXuSKKWY0OqU4KqTLsA3ggOG3Hg2deLHQN8KXT7OXFmbWSPWq8kCdxeyA8zX0i45WMs-JHeS6UPexMfSrU2zI2lxSzPKBOPUSPx_aL_2HI-SekhaI9n892oUE8mJQMiFDeOPZYxhSLAkyZ1bdSfZQIf8WnXZ29C94bSnh20beE9WVZQpi9UTdkbNgZARovcvI_ZTJZyzM9YhhX2yrhQXAnCvBMhEysnVfSOEAfx2sghx8W5E-Aihu3snAT8O2VlqMtiwU98aE0BUWNEB-lNIc5mlnKPbfNwSEPuXeFLDOj27uCrN3b8YWn7jzFYOT4vA46jpARiomtVpOQHP_CY7vUOiH_BSuixOwvl4vaYp49DqZWLvq70Rby_VGhWDtnYFZmxmZG_4rU44VsD3f3aY2a9B2rYf-_RYKdPz8_iZTY9gJbFJv0tq2JKNUOUvWeqiytWFM0wxqGbyN70vgarVAuxnz7NieBpjh7F4Poo-yWIsZxoU8EG14CjrVmW-5NkXsEVzoYTEgRSq1MCkL45D45o48ZXglCZRj8PTqMcw_Se7K9HGJZiK19xqweJZwnmwG4sD8qND93NM79CmVpix0y66PipVcXeK2W0Y8BgzcwB9VPfSeqa3XmTDtgJ9D5_NL2o95gYCvHs9lRb8Z2WnNdXO4N4TxCLr1nF-46pWrUOnr1S4N8U-KwrzlPzrHpl-AeQTqiox64NTuB50Rr1ZYngFqIEPMoyExZ-YIJuvC07Omszvw5A2GEAOHZdJa-iqUGVVqyIXAu4P7sm80PEnKfUiVw78izRENgnQQstMNZ0onWyqkPcvkcFFpBA1khDWNza_neWcY7H7sph2OV5Klt812FP8BGGLOV7FOcTtZnWTY8f_wkk8Yk4Ak5ZUnEbhXVQHD-2QjJ-JNKrobozWZkRiSpnCpHUENFV9d86lTrUjr1thyYhcIGYiIpC7Pjhn77pWgL5xS_RWcw-v3XQnJywwCM_zU4V8Zn9ValeQHWWEZzlgWbuXuRqwGc7PJLdVkZl2Qcgy383H3wGozkn3dhNvwotcVK7BJTRy4vzLQAMdDONWjDWfjlV2wRwkAbqT8KgYkfRV3Ae9lRgsN-7qO436mJv497rS8mFwr1YfXN1hhrWrgE4p4XkGzEf-9HBjxW9_P-jN_lAP61N1bOEFM-2JVkNJQ7TV3xHz3cyAVzZlhXM5DOzXWSFHTBTrvcn19KPA0HxXkg8svl4-gmjTrQLuB_TXhNFJZZv45mASSxZMcREr-3NY68etR2acoV6fNWsZXZpfOgbz7KumNY75oLukhptJojFC9nhgHmWRWAtZ-dbLax-KT5bLGj169CtfjGCdnSzBkDw5AvNmdbLlkZkScFMvOagC3DhQlEjB_03eyYX1a11ohSpQLxubZUZQL0WQhNiFiD-JoJ5LGHOXIt4uXvH87HfYvCMhC2J5usm9JmhSLQzthzjV_mDR3hQ_pCxTCgN3-ZqrlkTJzoPkzU3kehMvNS-eFkl93wdnY94QRCjUUkfnTt7Ed2RQX3n8HDP3eHvw7IjzsfxGbt9qmTcQF7nU1tN8DnIz5xOOv7N6KxxxRwWvvyn8ftdwtCqknpMsEMCz_Av56O_7SGocSRhGv6gHP1bAWjEcoAUb_NeeGxq-6dJvVmkmdM2A-WB7s2espYqdSQfTM6SqRgnOkxjl6f0Bm2WR- - -y5ckNDmguwAd6eyFYCL78_oyxJl5u0DqdMRyOTzj7hTVceXdgOtL7UxvV2JXdIgUwJCn9nsTi0VdamVnDA_N4SvZUOZuqRtCzyn4rBsEEe0GrM4cYDixCR7gRQ_CZD5ipK_mO_uoHjjjRPMUz-wQZzonmRtaSwsQovs61d28tpZxTpZpVucczmdBQs0_bZ4EgK323Vr_bMzt1px8ysGDbtrz-_M87MP7r-8fzxpdBEWvTNm2kzy9M_w_uyudO-xb3UClavEJxpa6wPMfgwhTbrJukM-ybbCUHsleyuJoIwB7MplfEBixbEDtHzdX2mtvUOO3BtFlxsRKL-y6SKsYyHRkHzuJpscNi3fp8NtrpkbVwHv5tGFjy6y71eMkoCfpVK0aQo7zf-PKii0RAaBWyLGFEu5fFXOjftU-Me_bTSporybRvhy-eKh-ElODyycm3tTBN4NwNkSJsyN-HIhdXbDoaoVtV-ipv9b6fgwk3Dp-e_SvFNSV6uIqPsP0SHqv7ObWFKdaQvlQ4pFTpzeF5F0UhAl0gf0gNUFkOHpba4_RyLlKnl_-K1dqxalGB]--></g></svg>