<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1659px" preserveAspectRatio="none" style="width:903px;height:1659px;background:#FFFFFF;" version="1.1" viewBox="0 0 903 1659" width="903px" zoomAndPan="magnify"><title>OAuth&#12525;&#12464;&#12452;&#12531;&#12501;&#12525;&#12540;&#65288;GitHub/Google&#65289;- PKCE</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="318.917" x="288.1526" y="29.5332">OAuth&#12525;&#12464;&#12452;&#12531;&#12501;&#12525;&#12540;&#65288;GitHub/Google&#65289;- PKCE</text><g><title>&lt;u&gt;&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="350.625" style="stroke:#181818;stroke-width:1;" width="10" x="232" y="197.9219"/></g><g><title>&lt;u&gt;&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="766.8438" style="stroke:#181818;stroke-width:1;" width="10" x="232" y="792.7109"/></g><g><title>&lt;u&gt;Next.js</title><rect fill="#FFFFFF" height="541.3828" style="stroke:#181818;stroke-width:1;" width="10" x="380.8735" y="883.7656"/></g><g><title>&lt;u&gt;Supabase Auth</title><rect fill="#FFFFFF" height="63.0547" style="stroke:#181818;stroke-width:1;" width="10" x="599.9287" y="438.7891"/></g><g><title>&lt;u&gt;Supabase Auth</title><rect fill="#FFFFFF" height="361.2734" style="stroke:#181818;stroke-width:1;" width="10" x="599.9287" y="957.4688"/></g><g><title>&lt;u&gt;OAuth Provider</title><rect fill="#FFFFFF" height="244.1641" style="stroke:#181818;stroke-width:1;" width="10" x="755.0186" y="548.5469"/></g><g><title>&lt;u&gt;OAuth Provider</title><rect fill="#FFFFFF" height="63.0547" style="stroke:#181818;stroke-width:1;" width="10" x="755.0186" y="1122.2813"/></g><g><title>&lt;u&gt;&#12456;&#12531;&#12489;&#12518;&#12540;&#12470;&#12540;</title><rect fill="#000000" fill-opacity="0.00000" height="1456.3359" width="8" x="53" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="57" x2="57" y1="121.2188" y2="1577.5547"/></g><g><title>&lt;u&gt;&#12502;&#12521;&#12454;&#12470;</title><rect fill="#000000" fill-opacity="0.00000" height="1456.3359" width="8" x="233" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="236.1035" x2="236.1035" y1="121.2188" y2="1577.5547"/></g><g><title>&lt;u&gt;Next.js</title><rect fill="#000000" fill-opacity="0.00000" height="1456.3359" width="8" x="381.8735" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="385.4082" x2="385.4082" y1="121.2188" y2="1577.5547"/></g><g><title>&lt;u&gt;Supabase Auth</title><rect fill="#000000" fill-opacity="0.00000" height="1456.3359" width="8" x="600.9287" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604.0566" x2="604.0566" y1="121.2188" y2="1577.5547"/></g><g><title>&lt;u&gt;OAuth Provider</title><rect fill="#000000" fill-opacity="0.00000" height="1456.3359" width="8" x="756.0186" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="759.0532" x2="759.0532" y1="121.2188" y2="1577.5547"/></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="5" y="118.1426">&#12456;&#12531;&#12489;&#12518;&#12540;&#12470;&#12540;</text><ellipse cx="57" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57,60.1094 L57,87.1094 M44,68.1094 L70,68.1094 M57,87.1094 L44,102.1094 M57,87.1094 L70,102.1094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="5" y="1591.0879">&#12456;&#12531;&#12489;&#12518;&#12540;&#12470;&#12540;</text><ellipse cx="57" cy="1602.6641" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57,1610.6641 L57,1637.6641 M44,1618.6641 L70,1618.6641 M57,1637.6641 L44,1652.6641 M57,1637.6641 L70,1652.6641" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="browser"><rect fill="#E3F2FD" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="105.793" x="184.1035" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="56" x="209" y="92.5332">&#12502;&#12521;&#12454;&#12470;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="91.793" x="191.1035" y="110.1426">(Next.js Client)</text></g><g class="participant participant-tail" data-participant="browser"><rect fill="#E3F2FD" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="105.793" x="184.1035" y="1576.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="56" x="209" y="1598.0879">&#12502;&#12521;&#12454;&#12470;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="91.793" x="191.1035" y="1615.6973">(Next.js Client)</text></g><g class="participant participant-head" data-participant="callback"><rect fill="#FFF3E0" height="66.8281" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="108.9307" x="331.4082" y="53.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="42.7861" x="364.4805" y="74.9238">Next.js</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="90.2754" x="340.7358" y="92.5332">Route Handler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="94.9307" x="338.4082" y="110.1426">(/auth/callback)</text></g><g class="participant participant-tail" data-participant="callback"><rect fill="#FFF3E0" height="66.8281" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="108.9307" x="331.4082" y="1576.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="42.7861" x="364.4805" y="1598.0879">Next.js</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="90.2754" x="340.7358" y="1615.6973">Route Handler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="94.9307" x="338.4082" y="1633.3066">(/auth/callback)</text></g><g class="participant participant-head" data-participant="supabase"><rect fill="#E8F5E9" height="31.6094" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="109.7441" x="550.0566" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="95.7441" x="557.0566" y="110.1426">Supabase Auth</text></g><g class="participant participant-tail" data-participant="supabase"><rect fill="#E8F5E9" height="31.6094" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="109.7441" x="550.0566" y="1576.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="95.7441" x="557.0566" y="1598.0879">Supabase Auth</text></g><g class="participant participant-head" data-participant="oauth"><rect fill="#FCE4EC" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="115.9307" x="702.0532" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="95.71" x="712.1636" y="92.5332">OAuth Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="101.9307" x="709.0532" y="110.1426">(GitHub/Google)</text></g><g class="participant participant-tail" data-participant="oauth"><rect fill="#FCE4EC" height="49.2188" rx="5" ry="5" style="stroke:#666666;stroke-width:0.5;" width="115.9307" x="702.0532" y="1576.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="95.71" x="712.1636" y="1598.0879">OAuth Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="101.9307" x="709.0532" y="1615.6973">(GitHub/Google)</text></g><g><title>&lt;u&gt;&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="350.625" style="stroke:#181818;stroke-width:1;" width="10" x="232" y="197.9219"/></g><g><title>&lt;u&gt;&#12502;&#12521;&#12454;&#12470;</title><rect fill="#FFFFFF" height="766.8438" style="stroke:#181818;stroke-width:1;" width="10" x="232" y="792.7109"/></g><g><title>&lt;u&gt;Next.js</title><rect fill="#FFFFFF" height="541.3828" style="stroke:#181818;stroke-width:1;" width="10" x="380.8735" y="883.7656"/></g><g><title>&lt;u&gt;Supabase Auth</title><rect fill="#FFFFFF" height="63.0547" style="stroke:#181818;stroke-width:1;" width="10" x="599.9287" y="438.7891"/></g><g><title>&lt;u&gt;Supabase Auth</title><rect fill="#FFFFFF" height="361.2734" style="stroke:#181818;stroke-width:1;" width="10" x="599.9287" y="957.4688"/></g><g><title>&lt;u&gt;OAuth Provider</title><rect fill="#FFFFFF" height="244.1641" style="stroke:#181818;stroke-width:1;" width="10" x="755.0186" y="548.5469"/></g><g><title>&lt;u&gt;OAuth Provider</title><rect fill="#FFFFFF" height="63.0547" style="stroke:#181818;stroke-width:1;" width="10" x="755.0186" y="1122.2813"/></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2222" x="0" y="152.3945"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="152.3945" y2="152.3945"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="155.3945" y2="155.3945"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="71.2368" x="412.4927" y="141.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="53.625" x="418.4927" y="158.7139">&#35469;&#35388;&#38283;&#22987;</text><g class="message" data-participant-1="user" data-participant-2="browser"><polygon fill="#181818" points="220,193.9219,230,197.9219,220,201.9219,224,197.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="57" x2="226" y1="197.9219" y2="197.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="64" y="193.0654">&#12525;&#12464;&#12452;&#12531;&#12508;&#12479;&#12531;&#12434;&#12463;&#12522;&#12483;&#12463;</text></g><g class="message" data-participant-1="browser" data-participant-2="browser"><line style="stroke:#181818;stroke-width:2;" x1="242" x2="284" y1="244.625" y2="244.625"/><line style="stroke:#181818;stroke-width:2;" x1="284" x2="284" y1="244.625" y2="257.625"/><line style="stroke:#181818;stroke-width:2;" x1="243" x2="284" y1="257.625" y2="257.625"/><polygon fill="#181818" points="253,253.625,243,257.625,253,261.625,249,257.625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8545" x="249" y="223.417">OAuth</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="285.8545" y="223.417">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.4072" x="289.4663" y="223.417">Provider&#36984;&#25246;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.6499" x="249" y="239.7686">(GitHub/Google)</text></g><path d="M247,275.625 L247,356.625 A5,5 0 0 0 252,361.625 L514,361.625 A5,5 0 0 0 519,356.625 L519,280.625 L509,270.625 L252,270.625 A5,5 0 0 0 247,275.625" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M509,270.625 L509,278.125 A2.5,2.5 0 0 0 511.5,280.625 L519,280.625 L509,270.625" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="191.6992" x="253" y="289.1201">PKCE&#28310;&#20633;&#65288;supabase-js&#20869;&#37096;&#65289;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231.8799" x="253" y="305.4717">1. code_verifier&#29983;&#25104;&#65288;&#12521;&#12531;&#12480;&#12512;&#25991;&#23383;&#21015;&#65289;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.8496" x="253" y="321.8232">2. code_challenge = SHA256(code_verifier)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.0254" x="253" y="338.1748">3. state&#29983;&#25104;&#65288;CSRF&#23550;&#31574;&#65289;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.1479" x="253" y="354.5264">4. code_verifier&#12434;localStorage&#12395;&#20445;&#23384;</text><g class="message" data-participant-1="browser" data-participant-2="supabase"><polygon fill="#181818" points="587.9287,434.7891,597.9287,438.7891,587.9287,442.7891,591.9287,438.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="242" x2="593.9287" y1="438.7891" y2="438.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.2153" x="249" y="384.8779">signInWithOAuth({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.2236" x="249" y="401.2295">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.5781" x="256.2236" y="401.2295">provider:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="306.8018" y="401.2295">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.9956" x="310.4136" y="401.2295">'github',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.2236" x="249" y="417.5811">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.5317" x="256.2236" y="417.5811">options:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="301.7554" y="417.5811">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="305.3672" y="417.5811">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="309.709" y="417.5811">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.519" x="313.3208" y="417.5811">redirectTo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="371.8398" y="417.5811">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="375.4517" y="417.5811">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.6709" x="249" y="433.9326">})</text></g><g class="message" data-participant-1="supabase" data-participant-2="browser"><polygon fill="#181818" points="253,497.8438,243,501.8438,253,505.8438,249,501.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="247" x2="603.9287" y1="501.8438" y2="501.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="259" y="464.2842">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="263.3418" y="464.2842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.9136" x="266.9536" y="464.2842">data:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="295.8672" y="464.2842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="299.479" y="464.2842">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="303.8208" y="464.2842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14.4473" x="307.4326" y="464.2842">url</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="321.8799" y="464.2842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="325.4917" y="464.2842">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="329.8335" y="464.2842">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.3418" x="333.4453" y="464.2842">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8608" x="259" y="480.6357">OAuth&#35469;&#35388;URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20.9409" x="259" y="496.9873">(&#21547;:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="279.9409" y="496.9873">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.688" x="283.5527" y="496.9873">code_challenge,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="378.2407" y="496.9873">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.5127" x="381.8525" y="496.9873">state)</text></g><g class="message" data-participant-1="browser" data-participant-2="oauth"><polygon fill="#181818" points="743.0186,544.5469,753.0186,548.5469,743.0186,552.5469,747.0186,548.5469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="237" x2="749.0186" y1="548.5469" y2="548.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="244" y="527.3389">&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.5127" x="244" y="543.6904">(OAuth&#35469;&#35388;&#30011;&#38754;)</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2222" x="0" y="577.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="577.7227" y2="577.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="580.7227" y2="580.7227"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="137.7603" x="379.231" y="566.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.1484" x="385.231" y="584.042">OAuth&#35469;&#35388;&#65288;&#22806;&#37096;&#65289;</text><g class="message" data-participant-1="oauth" data-participant-2="user"><polygon fill="#181818" points="68,635.6016,58,639.6016,68,643.6016,64,639.6016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="62" x2="754.0186" y1="639.6016" y2="639.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="74" y="618.3936">&#35469;&#35388;&#30011;&#38754;&#34920;&#31034;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.27" x="74" y="634.7451">(&#12525;&#12464;&#12452;&#12531;/&#27177;&#38480;&#30906;&#35469;)</text></g><g class="message" data-participant-1="user" data-participant-2="oauth"><polygon fill="#181818" points="743.0186,682.3047,753.0186,686.3047,743.0186,690.3047,747.0186,686.3047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="57" x2="749.0186" y1="686.3047" y2="686.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="64" y="665.0967">&#35469;&#35388;&#24773;&#22577;&#20837;&#21147;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="64" y="681.4482">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="71.5918" y="681.4482">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="75.2036" y="681.4482">&#12450;&#12463;&#12475;&#12473;&#35377;&#21487;</text></g><g class="message" data-participant-1="oauth" data-participant-2="oauth"><line style="stroke:#181818;stroke-width:2;" x1="765.0186" x2="807.0186" y1="733.0078" y2="733.0078"/><line style="stroke:#181818;stroke-width:2;" x1="807.0186" x2="807.0186" y1="733.0078" y2="746.0078"/><line style="stroke:#181818;stroke-width:2;" x1="766.0186" x2="807.0186" y1="746.0078" y2="746.0078"/><polygon fill="#181818" points="776.0186,742.0078,766.0186,746.0078,776.0186,750.0078,772.0186,746.0078" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="772.0186" y="711.7998">&#35469;&#35388;&#26908;&#35388;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="772.0186" y="728.1514">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="779.6104" y="728.1514">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="783.2222" y="728.1514">&#35469;&#35388;&#12467;&#12540;&#12489;&#29983;&#25104;</text></g><g class="message" data-participant-1="oauth" data-participant-2="browser"><polygon fill="#181818" points="253,788.7109,243,792.7109,253,796.7109,249,792.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="247" x2="759.0186" y1="792.7109" y2="792.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="259" y="771.5029">&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.9497" x="259" y="787.8545">/auth/callback?code=xxx&amp;state=yyy</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2222" x="0" y="821.8867"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="821.8867" y2="821.8867"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="824.8867" y2="824.8867"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="245.5181" x="325.3521" y="810.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="227.9063" x="331.3521" y="828.2061">&#12467;&#12540;&#12523;&#12496;&#12483;&#12463;&#20966;&#29702;&#65288;&#12469;&#12540;&#12496;&#12540;&#12469;&#12452;&#12489;&#65289;</text><g class="message" data-participant-1="browser" data-participant-2="callback"><polygon fill="#181818" points="368.8735,879.7656,378.8735,883.7656,368.8735,887.7656,372.8735,883.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="242" x2="374.8735" y1="883.7656" y2="883.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.7236" x="249" y="862.5576">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="275.7236" y="862.5576">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.4917" x="279.3354" y="862.5576">/auth/callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.5117" x="249" y="878.9092">?code=xxx</text></g><g class="message" data-participant-1="callback" data-participant-2="callback"><line style="stroke:#181818;stroke-width:2;" x1="390.8735" x2="432.8735" y1="914.1172" y2="914.1172"/><line style="stroke:#181818;stroke-width:2;" x1="432.8735" x2="432.8735" y1="914.1172" y2="927.1172"/><line style="stroke:#181818;stroke-width:2;" x1="391.8735" x2="432.8735" y1="927.1172" y2="927.1172"/><polygon fill="#181818" points="401.8735,923.1172,391.8735,927.1172,401.8735,931.1172,397.8735,927.1172" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1963" x="397.8735" y="909.2607">URL&#12363;&#12425;code&#21462;&#24471;</text></g><g class="message" data-participant-1="callback" data-participant-2="supabase"><polygon fill="#181818" points="587.9287,953.4688,597.9287,957.4688,587.9287,961.4688,591.9287,957.4688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="390.8735" x2="593.9287" y1="957.4688" y2="957.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.0552" x="397.8735" y="952.6123">exchangeCodeForSession(code)</text></g><path d="M614,975.4688 L614,1073.4688 A5,5 0 0 0 619,1078.4688 L833,1078.4688 A5,5 0 0 0 838,1073.4688 L838,980.4688 L828,970.4688 L619,970.4688 A5,5 0 0 0 614,975.4688" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><path d="M828,970.4688 L828,977.9688 A2.5,2.5 0 0 0 830.5,980.4688 L838,980.4688 L828,970.4688" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148.2495" x="620" y="988.9639">Supabase Auth&#20869;&#37096;&#20966;&#29702;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.5171" x="620" y="1005.3154">1. code&#12434;OAuth Provider&#12395;&#36865;&#20449;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.0488" x="620" y="1021.667">2. access_token/refresh_token&#21462;&#24471;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.4536" x="620" y="1038.0186">3. &#12518;&#12540;&#12470;&#12540;&#24773;&#22577;&#21462;&#24471;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.7681" x="620" y="1054.3701">4. auth.users&#12395;&#12518;&#12540;&#12470;&#12540;&#20316;&#25104;/&#26356;&#26032;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.1646" x="620" y="1070.7217">5. JWT&#12475;&#12483;&#12471;&#12519;&#12531;&#29983;&#25104;</text><g class="message" data-participant-1="supabase" data-participant-2="oauth"><polygon fill="#181818" points="743.0186,1118.2813,753.0186,1122.2813,743.0186,1126.2813,747.0186,1122.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="609.9287" x2="749.0186" y1="1122.2813" y2="1122.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35.3945" x="616.9287" y="1101.0732">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="652.3232" y="1101.0732">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.5571" x="655.9351" y="1101.0732">/oauth/token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.519" x="616.9287" y="1117.4248">(code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="649.4478" y="1117.4248">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="653.0596" y="1117.4248">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="660.6514" y="1117.4248">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.7554" x="664.2632" y="1117.4248">code_verifier)</text></g><g class="message" data-participant-1="oauth" data-participant-2="supabase"><polygon fill="#181818" points="620.9287,1181.3359,610.9287,1185.3359,620.9287,1189.3359,616.9287,1185.3359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="614.9287" x2="759.0186" y1="1185.3359" y2="1185.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.4917" x="626.9287" y="1147.7764">access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="626.9287" y="1164.1279">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="634.5205" y="1164.1279">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.4917" x="638.1323" y="1164.1279">refresh_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7.5918" x="626.9287" y="1180.4795">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="634.5205" y="1180.4795">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.479" x="638.1323" y="1180.4795">user_info</text></g><g class="message" data-participant-1="supabase" data-participant-2="supabase"><line style="stroke:#181818;stroke-width:2;" x1="609.9287" x2="651.9287" y1="1232.0391" y2="1232.0391"/><line style="stroke:#181818;stroke-width:2;" x1="651.9287" x2="651.9287" y1="1232.0391" y2="1245.0391"/><line style="stroke:#181818;stroke-width:2;" x1="610.9287" x2="651.9287" y1="1245.0391" y2="1245.0391"/><polygon fill="#181818" points="620.9287,1241.0391,610.9287,1245.0391,620.9287,1249.0391,616.9287,1245.0391" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.6118" x="616.9287" y="1210.8311">&#12518;&#12540;&#12470;&#12540;&#20316;&#25104;/&#26356;&#26032;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.3608" x="616.9287" y="1227.1826">(auth.users)</text></g><g class="message" data-participant-1="supabase" data-participant-2="supabase"><line style="stroke:#181818;stroke-width:2;" x1="609.9287" x2="651.9287" y1="1275.3906" y2="1275.3906"/><line style="stroke:#181818;stroke-width:2;" x1="651.9287" x2="651.9287" y1="1275.3906" y2="1288.3906"/><line style="stroke:#181818;stroke-width:2;" x1="610.9287" x2="651.9287" y1="1288.3906" y2="1288.3906"/><polygon fill="#181818" points="620.9287,1284.3906,610.9287,1288.3906,620.9287,1292.3906,616.9287,1288.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.7109" x="616.9287" y="1270.5342">JWT&#12475;&#12483;&#12471;&#12519;&#12531;&#29983;&#25104;</text></g><g class="message" data-participant-1="supabase" data-participant-2="callback"><polygon fill="#181818" points="401.8735,1314.7422,391.8735,1318.7422,401.8735,1322.7422,397.8735,1318.7422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="395.8735" x2="603.9287" y1="1318.7422" y2="1318.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="407.8735" y="1313.8857">&#12475;&#12483;&#12471;&#12519;&#12531;&#24773;&#22577;</text></g><g class="message" data-participant-1="callback" data-participant-2="callback"><line style="stroke:#181818;stroke-width:2;" x1="390.8735" x2="432.8735" y1="1365.4453" y2="1365.4453"/><line style="stroke:#181818;stroke-width:2;" x1="432.8735" x2="432.8735" y1="1365.4453" y2="1378.4453"/><line style="stroke:#181818;stroke-width:2;" x1="391.8735" x2="432.8735" y1="1378.4453" y2="1378.4453"/><polygon fill="#181818" points="401.8735,1374.4453,391.8735,1378.4453,401.8735,1382.4453,397.8735,1378.4453" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.3081" x="397.8735" y="1344.2373">Set-Cookie</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.1245" x="397.8735" y="1360.5889">(&#12475;&#12483;&#12471;&#12519;&#12531;Cookie)</text></g><g class="message" data-participant-1="callback" data-participant-2="browser"><polygon fill="#181818" points="253,1421.1484,243,1425.1484,253,1429.1484,249,1425.1484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="247" x2="384.8735" y1="1425.1484" y2="1425.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="259" y="1403.9404">&#12522;&#12480;&#12452;&#12524;&#12463;&#12488;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.6582" x="259" y="1420.292">(&#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;)</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2222" x="0" y="1454.3242"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="1454.3242" y2="1454.3242"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2222" y1="1457.3242" y2="1457.3242"/><rect fill="#EEEEEE" height="24.3516" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="111.4556" x="392.3833" y="1443.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93.8438" x="398.3833" y="1460.6436">&#12475;&#12483;&#12471;&#12519;&#12531;&#30906;&#31435;</text><g class="message" data-participant-1="browser" data-participant-2="browser"><line style="stroke:#181818;stroke-width:2;" x1="242" x2="284" y1="1516.2031" y2="1516.2031"/><line style="stroke:#181818;stroke-width:2;" x1="284" x2="284" y1="1516.2031" y2="1529.2031"/><line style="stroke:#181818;stroke-width:2;" x1="243" x2="284" y1="1529.2031" y2="1529.2031"/><polygon fill="#181818" points="253,1525.2031,243,1529.2031,253,1533.2031,249,1529.2031" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="249" y="1494.9951">&#35469;&#35388;&#29366;&#24907;&#26356;&#26032;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1436" x="249" y="1511.3467">(Context/Store)</text></g><g class="message" data-participant-1="browser" data-participant-2="user"><polygon fill="#181818" points="68,1555.5547,58,1559.5547,68,1563.5547,64,1559.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2.0,2.0;" x1="62" x2="236" y1="1559.5547" y2="1559.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="74" y="1554.6982">&#12480;&#12483;&#12471;&#12517;&#12508;&#12540;&#12489;&#34920;&#31034;</text></g><!--SRC=[dLPjJnj74Fv-ls85Ki4anc12qbfoAs9iw6iG9ieNI-Ym5_k2kNFlpjGK8OKxaM1GXLMbfWZI1WI4G111D6bBtF1ZbhFnf_o5pkxPvrjZMhL60kvsvfcPPvwPTKVmFt-43aICtubP8iO9CK-9yQUrSHf0zmQoUegOHyHuJOmTUc3-H1_DqeVIqiYNeV27KXvSxuTGhxSNSOOBwyHOWRFopkRbVYc0Gegiuvn-1tqT6a5U5Crcn0bHmuX6i1PVMQLLOkQ90TYxnDnYePQ4ZlzHYQ1DIN96LCLffE5lirYEum5LLRuRIqdnAHbh6lAxJ5GbAoVYYYfZ5VNsk0wcnTmq68j9h4dVO-JlwMa1F2AgkXINCgAi8y31QbgIiJk3ZCjWJa3mkIl6fv8iQaX9AofgZmpG7_jCKG6Zzlus-mZpRZXPqV6rE978OFZELPp8tL2FVv3Yw9AUnl_Sqo597yvE-8OK9Pd6q5mlebqM136k0rORCVQPGvwOUqmiR-5t6n8rbDMmAhYhRIDcaPWlYR47LZ6vynjeVlT33ONI4fPr3tEQWBQ07seFzqNyaK7Ul-OGaqULB5GzBCg9D5O1oIT20Rwuc4vF00SsKls9qT0Nxk6XEB4nUwt-fZtySQG__0blpoX28weo8oLOI8uMEw92iu1meV2jS4WGWa5qUV03ABrQNB5Uh20gHCe9ydxgb1dW9yJS9COv6xOVYN5Cp0DYcl0FvLgQ4Q7acfyWr04uB3x9wi8VvULVhgGg24mogfHCwKYPT20HwkgYdIsV5IrZ7HfV9yJxKBCUBrRDVMX-LnVOzNQZk9B0upDObIObh5QU_bfUAe07RIwjuX4ndvUBJwoZDMjfZUu3XFmrdtWAseBb94P151qUyFVVxkImF63Rruqq7QfrS4FHqOXr_BvoLBJ1RZKb07Ib5UXt51G9qqaM3Y_Edrb7FmjOJh01uVXo6Xr0cfIKFvSVI7gAKTSv5vCHojJu2w2E99na9pfkqjTAHfSKMGkWEQJYXAJYk3wceFcOFEzfzAUE3HDQZ-BbMZI74g8kqhzPDOtcgJyBRIlb_kXNq2-hS1XeOkkcpOX7IE0MiLp5sHgaiZgWVQ2oUiMaj0J0haYLf- -gpxOvF4TR85oN9V1lxHJjzZCDEmuibc17XD1Pkq8t_kNMVcNd32AxLUuhxx-ihXSgssTWwd56efwvxLys5wtd9zRYhhMy4PDlm5MqJSimti4zTBb_OgqU2ut8JQxiUg5EzZCnJkbYClEsdXo_fZ6yoXU_LJwZ7GdcShcFM2k2ixEpRlPiCYXtzNY7n2pOysizsQiK7jC1CTwmemBRb6zOkFmLNkkDSBNLMMO1D1GUGtncCTd9hG5IFnG4nvV70QsHXHLYvAcljLgqtg_njguvmJbG8iWm1AOHHOt2BGYpm2QtfVZv3UEyfok6l-NPNh7fSQyM66X-by58LnyjN9nlsQj4ZCSXXN5TcSAoJyMJAjPIzbEj4BP4t3TIJK_rKzWWbC9kAZuDmDsc5tzjWanyvOtVoiNNODlVZRvuC4QbHvi9tuXUW8XhMceicCQyD_GuSYyAlM9FFfPTpEOCtK1DIw_rJF5DS1TDrStLJL_GOiObUL9feKjtUYxCQ-k6J1i4UQvplvONVlsvLDTaRhUbzLQxHhTHh7j3YZ8bORfNU3ZxlSVj-wzJtidkAnjZbzx0R5Tmcx4nIsoy-OAtpog7zkNUyawkhSFbj-N55OVQsZTV7xsm85t7iR55MoPbhrEXrTB-6m00]--></g></svg>