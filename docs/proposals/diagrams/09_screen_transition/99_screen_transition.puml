@startuml PlantUML_Studio_Screen_Transition
'==================================================
' ç”»é¢é·ç§»å›³: PlantUML Studio
' å¯¾è±¡: å…¨ç”»é¢ï¼ˆèªè¨¼/ãƒ¡ã‚¤ãƒ³/ãƒ¢ãƒ¼ãƒ€ãƒ«/ç®¡ç†ï¼‰
' åŸºæº–: UCå›³ï¼ˆ32UCï¼‰ã€æ¥­å‹™ãƒ•ãƒ­ãƒ¼å›³ï¼ˆ11ãƒ•ãƒ­ãƒ¼ï¼‰
'       æ¤œç´¢æ©Ÿèƒ½è¨­è¨ˆæ›¸ v2.0
'       TD-016ï¼ˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼æ–¹å¼ + ãƒªã‚µã‚¤ã‚¶ãƒ¼ï¼‰
' ä½œæˆæ—¥: 2025-12-22
' ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.6 (ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼æ–¹å¼)
'==================================================

skinparam state {
    BackgroundColor #F5F5F5
    BorderColor #666666
    FontColor #333333
    FontSize 12
}

' ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¹ã‚¿ã‚¤ãƒ«
skinparam state<<auth>> {
    BackgroundColor #FFFDE7
}

skinparam state<<main>> {
    BackgroundColor #E3F2FD
}

skinparam state<<view>> {
    BackgroundColor #BBDEFB
}

skinparam state<<modal>> {
    BackgroundColor #E8F5E9
}

skinparam state<<admin>> {
    BackgroundColor #FCE4EC
}

' ========== é–‹å§‹ç‚¹ ==========
[*] --> login : åˆå›ã‚¢ã‚¯ã‚»ã‚¹\n(æœªèªè¨¼)

' ========== èªè¨¼ç”»é¢ç¾¤ ==========
state "èªè¨¼ç”»é¢ç¾¤" as auth_group {
    state "ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢" as login <<auth>>
    login : UC 1-1
    login : OAuthèªè¨¼ (GitHub/Google)
}

' ========== ãƒ¡ã‚¤ãƒ³ç”»é¢ç¾¤ ==========
state "ãƒ¡ã‚¤ãƒ³ç”»é¢ç¾¤" as main_group {
    state "ãƒ›ãƒ¼ãƒ " as home <<main>> {
        state "ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼\nã‚µã‚¤ãƒ‰ãƒãƒ¼" as sidebar
        sidebar : ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ„ãƒªãƒ¼ï¼‰
        sidebar : ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
        sidebar : âš™ï¸ è¨­å®š / ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

        state "ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°" as home_onboarding <<view>>
        home_onboarding : åˆå›/PJ 0ä»¶æ™‚
        home_onboarding : ã‚ˆã†ã“ãç”»é¢
        home_onboarding : æœ€åˆã®PJä½œæˆã‚¬ã‚¤ãƒ‰

        state "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»å›³è¡¨" as home_projects <<view>>
        home_projects : UC 2-1
        home_projects : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§
        home_projects : æœ€è¿‘ã®å›³è¡¨
        home_projects : ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢: Ctrl+Kã€‘

        state "å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„" as home_learning <<view>>
        home_learning : UC 3-10, 3-11
        home_learning : ã‚«ãƒ†ã‚´ãƒªåˆ¥ä¸€è¦§
        home_learning : å°‚ç”¨æ¤œç´¢
        home_learning : ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©³ç´°

        ' ãƒ›ãƒ¼ãƒ å†…ãƒ“ãƒ¥ãƒ¼åˆ‡æ›¿ï¼ˆã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
        sidebar --> home_onboarding
        sidebar --> home_projects
        sidebar --> home_learning
        home_onboarding --> home_projects : é–‹å§‹/ã‚¹ã‚­ãƒƒãƒ—
    }

    state "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°" as project_detail <<main>>
    project_detail : UC 2-2, 2-3, 2-4
    project_detail : å›³è¡¨ä¸€è¦§
    project_detail : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

    state "ã‚¨ãƒ‡ã‚£ã‚¿ç”»é¢" as editor <<main>>
    editor : UC 3-1ã€œ3-6
    editor : PlantUML/Excalidraw
    editor : ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
    editor : AIæ”¯æ´ (UC 4-1, 4-2)

    ' ãƒ¡ã‚¤ãƒ³ç”»é¢å†…é·ç§»
    home_projects --> project_detail : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠ
    project_detail --> editor : å›³è¡¨é¸æŠ/æ–°è¦ä½œæˆ
    project_detail --> home : æˆ»ã‚‹
    editor --> project_detail : æˆ»ã‚‹
}

' ========== ãƒ¢ãƒ¼ãƒ€ãƒ«ç¾¤ ==========
state "ãƒ¢ãƒ¼ãƒ€ãƒ«ç¾¤" as modal_group {
    state "æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ" as new_project <<modal>>
    new_project : UC 2-1
    new_project : åå‰å…¥åŠ›

    state "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·¨é›†" as edit_project <<modal>>
    edit_project : UC 2-3
    edit_project : åå‰/èª¬æ˜å¤‰æ›´

    state "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‰Šé™¤ç¢ºèª" as delete_project <<modal>>
    delete_project : UC 2-4
    delete_project : ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

    state "æ–°è¦å›³è¡¨ä½œæˆ" as new_diagram <<modal>>
    new_diagram : UC 3-1
    new_diagram : ã‚¿ã‚¤ãƒ—é¸æŠ

    state "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ" as template <<modal>>
    template : UC 3-2
    template : ã‚«ãƒ†ã‚´ãƒªåˆ¥è¡¨ç¤º

    state "ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š" as export <<modal>>
    export : UC 3-6
    export : ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸æŠ
    export : ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š

    state "å›³è¡¨å‰Šé™¤ç¢ºèª" as delete_diagram <<modal>>
    delete_diagram : UC 3-9
    delete_diagram : ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

    state "AIãƒãƒ£ãƒƒãƒˆ" as ai_chat <<modal>>
    ai_chat : UC 4-2
    ai_chat : ä¼šè©±å±¥æ­´è¡¨ç¤º
}

' ========== ç®¡ç†ç”»é¢ç¾¤ï¼ˆMVPï¼‰ ==========
state "ç®¡ç†ç”»é¢ç¾¤" as admin_group {
    state "ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰" as admin_dashboard <<admin>>
    admin_dashboard : ç®¡ç†è€…å°‚ç”¨
    admin_dashboard : æ¦‚è¦è¡¨ç¤º

    state "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†" as user_mgmt <<admin>>
    user_mgmt : UC 5-1
    user_mgmt : ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§/ç·¨é›†

    state "LLMãƒ¢ãƒ‡ãƒ«ç®¡ç†" as llm_mgmt <<admin>>
    llm_mgmt : UC 5-2ã€œ5-5
    llm_mgmt : ãƒ¢ãƒ‡ãƒ«ç™»éŒ²/è¨­å®š

    state "ä½¿ç”¨é‡ç›£è¦–" as usage_monitor <<admin>>
    usage_monitor : UC 5-7, 5-8
    usage_monitor : LLMä½¿ç”¨é‡è¡¨ç¤º

    state "å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†" as learning_mgmt <<admin>>
    learning_mgmt : UC 5-11, 5-12
    learning_mgmt : ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç™»éŒ²/ç·¨é›†

    ' ç®¡ç†ç”»é¢å†…é·ç§»
    admin_dashboard --> user_mgmt : ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
    admin_dashboard --> llm_mgmt : LLMç®¡ç†
    admin_dashboard --> usage_monitor : ä½¿ç”¨é‡
    admin_dashboard --> learning_mgmt : å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    user_mgmt --> admin_dashboard : æˆ»ã‚‹
    llm_mgmt --> admin_dashboard : æˆ»ã‚‹
    usage_monitor --> admin_dashboard : æˆ»ã‚‹
    learning_mgmt --> admin_dashboard : æˆ»ã‚‹
}

' ========== ã‚°ãƒ«ãƒ¼ãƒ—é–“é·ç§» ==========

' èªè¨¼ â†’ ãƒ¡ã‚¤ãƒ³
login --> home : ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ

' ãƒ¡ã‚¤ãƒ³ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆé–‹ãï¼‰
home_projects --> new_project : æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
home_projects --> edit_project : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·¨é›†
home_projects --> delete_project : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‰Šé™¤
home_onboarding --> new_project : æœ€åˆã®PJä½œæˆ
project_detail --> new_diagram : æ–°è¦å›³è¡¨
project_detail --> delete_diagram : å›³è¡¨å‰Šé™¤
editor --> template : ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæŒ¿å…¥
editor --> export : ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
editor --> ai_chat : AIãƒãƒ£ãƒƒãƒˆé–‹ã

' ãƒ¢ãƒ¼ãƒ€ãƒ« â†’ ãƒ¡ã‚¤ãƒ³ï¼ˆé–‰ã˜ã‚‹/å®Œäº†ï¼‰
new_project --> home_projects : ä½œæˆå®Œäº†/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
edit_project --> home_projects : ä¿å­˜/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
delete_project --> home_projects : å‰Šé™¤/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
new_diagram --> editor : ä½œæˆå®Œäº†
template --> editor : é¸æŠ/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
export --> editor : ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
delete_diagram --> project_detail : å‰Šé™¤/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
ai_chat --> editor : é–‰ã˜ã‚‹

' ãƒ¡ã‚¤ãƒ³ â†’ ç®¡ç†ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
home --> admin_dashboard : ç®¡ç†ç”»é¢\n(ç®¡ç†è€…æ¨©é™)

' ç®¡ç† â†’ ãƒ¡ã‚¤ãƒ³
admin_dashboard --> home : æˆ»ã‚‹

' ========== ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ ==========
home --> [*] : ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
editor --> [*] : ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
admin_dashboard --> [*] : ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

' ========== æ³¨é‡ˆ ==========
note right of login
  èªè¨¼æ–¹å¼:
  - OAuth 2.0 PKCE (GitHub, Google)
  - Supabase Auth SSR
  â€»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¯ç®¡ç†è€…ãŒå®Ÿæ–½ (UC 5-1)
end note

note bottom of editor
  ã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½:
  - Monaco Editor (PlantUML)
  - Excalidraw (ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ )
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - AI Question-Start
  - è‡ªå‹•/æ‰‹å‹•ä¿å­˜
end note

note left of admin_dashboard
  ç®¡ç†è€…æ¨©é™å¿…é ˆ
  ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯
  ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
end note

note right of home
  **ãƒ›ãƒ¼ãƒ ç”»é¢æ§‹æˆ (v1.6)**
  ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼æ–¹å¼ã‚µã‚¤ãƒ‰ãƒãƒ¼
  ï¼ˆãƒ„ãƒªãƒ¼ãƒ“ãƒ¥ãƒ¼ + ãƒªã‚µã‚¤ã‚¶ãƒ¼ï¼‰
  + ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢

  ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢3ãƒ“ãƒ¥ãƒ¼:
  1. ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆåˆå›/PJ 0ä»¶ï¼‰
  2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»å›³è¡¨ï¼ˆé€šå¸¸ï¼‰
  3. å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆUC 3-10, 3-11ï¼‰

  ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢: Ctrl+K
  ã‚µã‚¤ãƒ‰ãƒãƒ¼: 200-400px (280pxåˆæœŸ)
end note

@enduml
