# WF統合 作業手順書 v2.4（最終版）

> **作成日**: 2025-12-31
> **バージョン**: v2.4（最終版）
> **目的**: 07_gui_panel_quick_add.excalidrawを00_wireframe_index.md配下のファイルに統合する
> **前提**: 07および01_defaultの要素構成を実際に確認済み
> **評価履歴**: v1.0(82点) → v1.1(91点) → v1.2(95点) → v1.3(97点) → v1.4(97点/最終版)
>
> **ドキュメント構成**:
> | パート | セクション | 内容 |
> |:------:|-----------|------|
> | **Part A: 情報** | §1-2 | ソースファイル構成、統合先構成 |
> | **Part B: 手順** | §3-5 | 統合手順、更新手順、ロールバック |
> | **Part C: 検証** | §6 | 成功基準チェックリスト |
> | **Part D: 付録** | 付録A-B | D-xx対応表、スコア計算 |

---

## クイックスタートガイド（1ページ要約）

```
┌─────────────────────────────────────────────────────────────────────┐
│                    WF統合 5ステップ                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Step 1: バックアップ作成                                           │
│    □ 04_editor/ → 04_editor_backup_YYYYMMDD/                       │
│                                                                     │
│  Step 2: 07の対象領域を特定                                         │
│    □ Mode 1 (300px): クイック追加フォーム                           │
│    □ Mode 2 (950px): 横長レイアウト                                 │
│                                                                     │
│  Step 3: 統合パターン判定                                           │
│    □ 01_default → P1.5（GUIパネル部分のみ置換）                    │
│    □ 06_gui_only → P1（完全置換、新規作成）                        │
│                                                                     │
│  Step 4: 統合実行                                                   │
│    □ Excalidrawで07を開く → 対象要素選択 → コピー                  │
│    □ 対象ファイルを開く → 該当位置にペースト → 調整                │
│                                                                     │
│  Step 5: 検証                                                       │
│    □ レイアウト確認（要素重複なし）                                 │
│    □ 00_wireframe_index.md 更新                                    │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**所要時間目安**: 01_default 2時間、06_gui_only 1時間

---

## 1. 07の要素構成（実データ確認済み）【Part A: 情報】

### 1.1 ファイル基本情報

| 項目 | 値 |
|------|-----|
| ファイル名 | 07_gui_panel_quick_add.excalidraw |
| サイズ | 544KB |
| バージョン | v3.1 |
| タイトル | GUIパネル v3.1 - クイック追加機能付き（Mode 1 & Mode 2）|

### 1.2 Mode 1（300px）要素一覧

| 要素ID | 種類 | 座標 (x, y) | サイズ (W×H) | 内容 |
|--------|------|-------------|--------------|------|
| mode1-frame | rectangle | 20, 20 | 300×580 | メインフレーム（青枠） |
| mode1-header | rectangle | 20, 20 | 300×36 | ヘッダー「◀▶ Sequence」 |
| mode1-sec2-box | rectangle | 30, 95 | 280×420 | Section 2: メッセージ領域 |
| mode1-quickadd-btn | rectangle | 40, 185 | 260×28 | 「[− クイック追加]」ボタン |
| mode1-form-box | rectangle | 45, 220 | 250×186 | クイック追加フォーム |
| mode1-from-dropdown | rectangle | 100, 228 | 120×24 | From選択「Alice ▼」 |
| mode1-type-dropdown | rectangle | 100, 262 | 120×24 | Type選択「→ (通常) ▼」 |
| mode1-to-dropdown | rectangle | 100, 295 | 120×24 | To選択「Bob ▼」 |
| mode1-message-input | rectangle | 54, 327 | 230×28 | メッセージ入力欄 |
| mode1-add-btn | rectangle | 179, 371 | 50×24 | 「追加」ボタン（青） |
| mode1-cancel-btn | rectangle | 234, 371 | 50×24 | 「クリア」ボタン（灰） |
| mode1-modal-btn | rectangle | 40, 455 | 260×28 | 「[シーケンス編集を開く →]」|

### 1.3 Mode 2（950px）要素一覧

| 要素ID | 種類 | 座標 (x, y) | サイズ (W×H) | 内容 |
|--------|------|-------------|--------------|------|
| mode2-frame | rectangle | 370, 20 | 600×360 | メインフレーム（緑枠） |
| mode2-header | rectangle | 370, 20 | 600×36 | ヘッダー「◀▶ Sequence」 |
| mode2-sec2-box | rectangle | 380, 95 | 580×270 | Section 2: メッセージ領域 |

### 1.4 Mode 2（950px）要素一覧（追加確認分）

| 要素ID | 種類 | 座標 (x, y) | サイズ (W×H) | 内容 |
|--------|------|-------------|--------------|------|
| mode2-quickadd-btn | rectangle | 390, 165 | 560×28 | 「[− クイック追加]」ボタン |
| mode2-form-box | rectangle | 395, 200 | 550×100 | クイック追加フォーム |
| mode2-from-dropdown | rectangle | 450, 212 | 100×24 | From選択「Alice ▼」 |
| mode2-type-dropdown | rectangle | 605, 212 | 120×24 | Type選択「-[hidden]> ▼」|
| mode2-to-dropdown | rectangle | 770, 212 | 100×24 | To選択「Bob ▼」 |
| mode2-message-input | rectangle | 405, 248 | 400×28 | メッセージ入力欄 |
| mode2-add-btn | rectangle | 820, 248 | 60×28 | 「追加」ボタン |

### 1.5 統合対象の特定

| 対象 | 統合先 | パターン |
|------|--------|----------|
| Mode 1 GUIパネル | 01_default.excalidraw | P1.5（GUIパネル部分置換）|
| Mode 2 GUIパネル | 06_gui_only.excalidraw | P1（完全置換）|

---

## 2. 01_defaultの現状構成（統合前）

### 2.1 01_default要素構成（実データ確認済み）

| 要素ID | 座標 (x, y) | サイズ | 内容 |
|--------|-------------|--------|------|
| main-frame | 0, 0 | 1920×1080 | 全体フレーム |
| header-bar | 0, 0 | 1920×48 | ヘッダーバー |
| gui-panel | 0, 48 | 300×832 | **GUIパネル本体** |
| section1-header | 8, 88 | 284×36 | 「▼ 参加者 (3)」|
| participant-list-bg | 8, 124 | 284×90 | 参加者リスト背景 |
| **section2-header** | **8, 232** | **284×36** | **「▼ メッセージ」← 統合対象** |

### 2.2 01_default Section 2の現状位置

```
01_default GUIパネル y座標マップ:

  y=48  ┌──────────────────────────────────────────┐
        │ GUIパネル（タイトル・選択トグル）        │
  y=88  ├──────────────────────────────────────────┤
        │ Section 1: 参加者 (header)               │
  y=124 ├──────────────────────────────────────────┤
        │ Section 1: 参加者 (list, 90px)           │
  y=214 ├──────────────────────────────────────────┤
        │ (マージン)                                │
  y=232 ├──────────────────────────────────────────┤
        │ Section 2: メッセージ (header)           │  ← ★統合挿入位置
  y=268 ├──────────────────────────────────────────┤
        │ Section 2: メッセージ (content)          │  ← ★クイック追加フォーム追加
        │  ...                                     │
        ├──────────────────────────────────────────┤
        │ Section 3-5 (折りたたみ)                 │
  y=880 └──────────────────────────────────────────┘
```

### 2.3 統合による要素競合分析

| 01_default要素 | y座標範囲 | 07要素 | 競合判定 | 対処 |
|---------------|-----------|--------|:--------:|------|
| section2-header | 232-268 | なし | ✅維持 | そのまま |
| section2-content | 268-? | mode1-quickadd-btn等 | ⚠️置換 | 07要素で置換 |
| section3-header | ?-? | なし | ✅維持 | y座標調整 |

### 2.4 座標変換計算（07→01_default）

**変換公式**:
```
01_default座標 = 07座標 + オフセット
```

| 07要素 | 07座標 (x, y) | オフセット | 01_default目標座標 | 備考 |
|--------|--------------|-----------|------------------|------|
| mode1-quickadd-btn | 40, 185 | (−32, +83) | 8, 268 | Section2直下 |
| mode1-form-box | 45, 220 | (−37, +83) | 8, 303 | フォーム開始 |
| mode1-from-dropdown | 100, 228 | (−37, +83) | 63, 311 | From選択 |
| mode1-type-dropdown | 100, 262 | (−37, +83) | 63, 345 | Type選択 |
| mode1-to-dropdown | 100, 295 | (−37, +83) | 63, 378 | To選択 |
| mode1-message-input | 54, 327 | (−37, +83) | 17, 410 | メッセージ入力 |
| mode1-add-btn | 179, 371 | (−37, +83) | 142, 454 | 追加ボタン |
| mode1-cancel-btn | 234, 371 | (−37, +83) | 197, 454 | クリアボタン |
| mode1-modal-btn | 40, 455 | (−32, +83) | 8, 538 | モーダル起動 |

**オフセット計算根拠**:
- x軸: 07のx=40 → 01_defaultのx=8（Sectionコンテンツ開始位置）
- y軸: 07のy=185 → 01_defaultのy=268（Section2 header終了直後）

### 2.5 座標変換計算（07 Mode 2→06_gui_only）

**変換公式**:
```
06_gui_only座標 = 07座標 - オフセット(370, 20)
```

| 07要素 | 07座標 (x, y) | オフセット | 06_gui_only目標座標 | 備考 |
|--------|--------------|-----------|---------------------|------|
| mode2-frame | 370, 20 | (−370, −20) | 0, 0 | メインフレーム |
| mode2-header | 370, 20 | (−370, −20) | 0, 0 | ヘッダー |
| mode2-quickadd-btn | 390, 165 | (−370, −20) | 20, 145 | クイック追加ボタン |
| mode2-form-box | 395, 200 | (−370, −20) | 25, 180 | フォーム開始 |
| mode2-from-dropdown | 450, 212 | (−370, −20) | 80, 192 | From選択 |
| mode2-type-dropdown | 605, 212 | (−370, −20) | 235, 192 | Type選択 |
| mode2-to-dropdown | 770, 212 | (−370, −20) | 400, 192 | To選択 |
| mode2-message-input | 405, 248 | (−370, −20) | 35, 228 | メッセージ入力 |
| mode2-add-btn | 820, 248 | (−370, −20) | 450, 228 | 追加ボタン |

**オフセット計算根拠**:
- x軸: 07のMode 2開始x=370 → 06_gui_onlyのx=0（左端）
- y軸: 07のMode 2開始y=20 → 06_gui_onlyのy=0（上端）

---

## 3. 統合手順（詳細版）【Part B: 手順】

### 3.1 Phase 1: 準備（15分）

#### 3.1.1 バックアップ作成

```powershell
# PowerShellで実行
cd C:\d\PlantUML2_Opus4.5\docs\evidence\20251224_1955_ui_design_login\wireframes
Copy-Item -Recurse 04_editor 04_editor_backup_$(Get-Date -Format "yyyyMMdd")
```

#### 3.1.2 作業ファイル一覧確認

| ファイル | 現状 | 統合パターン | 影響範囲 |
|---------|------|-------------|---------|
| 01_default.excalidraw | ✅ 96点完了 | P1.5 | GUIパネル（x: 0〜300px） |
| 06_gui_only.excalidraw | 🔴 未作成 | P1 | 新規作成 |

---

### 3.2 Phase 2: 01_default統合（P1.5ハイブリッド）（2時間）

#### 3.2.1 01_defaultの現状確認

01_defaultの現在のGUIパネル構成を確認:
- □ GUIパネル領域: x: 0〜300px
- □ 現在の要素: Section 1〜5の折りたたみヘッダー
- □ クイック追加フォーム: **未実装**（今回追加対象）

#### 3.2.2 統合対象要素の選択

**07から01_defaultに統合する要素**:

| # | 要素ID | 座標移動 | 備考 |
|:-:|--------|---------|------|
| 1 | mode1-quickadd-btn | そのまま | クイック追加ボタン |
| 2 | mode1-form-box | そのまま | フォームコンテナ |
| 3 | mode1-from-dropdown | そのまま | From選択 |
| 4 | mode1-type-dropdown | そのまま | Type選択 |
| 5 | mode1-to-dropdown | そのまま | To選択 |
| 6 | mode1-message-input | そのまま | メッセージ入力 |
| 7 | mode1-add-btn | そのまま | 追加ボタン |
| 8 | mode1-cancel-btn | そのまま | クリアボタン |
| 9 | mode1-modal-btn | そのまま | モーダル起動ボタン |

**01_defaultから維持する要素**:

| # | 要素 | 理由 |
|:-:|------|------|
| 1 | ヘッダー | 01_default版の方が完全 |
| 2 | Codeパネル | 変更不要 |
| 3 | Previewパネル | 変更不要 |
| 4 | AIパネル | 変更不要 |

#### 3.2.3 実行手順（Step別時間見積もり）

```
□ Step 1: Excalidrawで07を開く                    [1分]
□ Step 2: 以下の要素を複数選択（Shift+クリック）: [3分]
          - mode1-quickadd-btn
          - mode1-form-box
          - mode1-from-dropdown
          - mode1-type-dropdown
          - mode1-to-dropdown
          - mode1-message-input
          - mode1-add-btn
          - mode1-cancel-btn
          - mode1-modal-btn
          - 関連テキスト要素すべて
□ Step 3: コピー（Ctrl+C）                           [1分]
□ Step 4: 01_default.excalidrawを開く                [1分]
□ Step 5: GUIパネル内の既存Section 2を展開状態にする [2分]
□ Step 6: ペースト（Ctrl+V）                         [1分]
□ Step 7: 位置調整:                                  [15分]
          - x座標: 07と同じ（20〜300px範囲内）
          - y座標: Section 2ヘッダー直下に配置
          - 具体的目標座標は §2.4 座標変換表を参照
□ Step 8: 既存のSection 2コンテンツを削除または下に移動 [10分]
          - 既存要素を選択→Delete
          - またはグループ化してy座標を+220px移動
□ Step 9: 保存（Ctrl+S）                             [1分]
□ Step 10: 視覚確認（下記チェックリスト）            [5分]
────────────────────────────────────────────────────
合計: 約40分（バッファ込み60分推奨）
```

**視覚確認チェックリスト（Step 10で使用）**:
```
□ V1: クイック追加ボタンがSection 2ヘッダー直下に見える
□ V2: フォーム全体がGUIパネル幅（300px）内に収まる
□ V3: 「追加」「クリア」ボタンのテキストが読める
□ V4: Section 3ヘッダーとの間に適切な余白がある
□ V5: Excalidrawで選択時に要素が重なっていない
```

---

### 3.3 Phase 3: 06_gui_only作成（P1完全置換）（1時間）

#### 3.3.1 新規ファイル作成

06_gui_only.excalidrawは未作成のため、07のMode 2をベースに新規作成。

#### 3.3.2 実行手順（Step別時間見積もり）

```
□ Step 1: Excalidrawで07を開く                       [1分]
□ Step 2: Mode 2領域のすべての要素を選択:            [3分]
          - mode2-frame (x: 370, y: 20)
          - mode2-header
          - mode2-sec2-box
          - mode2-quickadd-btn
          - mode2-form-box
          - 内部要素すべて（Shift+クリック）
□ Step 3: コピー（Ctrl+C）                           [1分]
□ Step 4: 新規Excalidrawファイルを作成               [2分]
□ Step 5: ペースト（Ctrl+V）                         [1分]
□ Step 6: 座標調整:                                  [10分]
          - 全要素を選択
          - x座標を一括変更: x -= 370（x: 0起点に）
          - または: 左上要素を原点(0,0)にドラッグ
□ Step 7: 追加要素:                                  [15分]
          - Previewパネル（x: 620〜, 01_defaultからコピー推奨）
          - ヘッダー（01_defaultからコピー推奨）
          - フッター（必要に応じて）
□ Step 8: 06_gui_only.excalidrawとして保存           [1分]
□ Step 9: 視覚確認（下記チェックリスト）             [5分]
────────────────────────────────────────────────────
合計: 約40分（バッファ込み60分推奨）
```

**視覚確認チェックリスト（Step 9で使用）**:
```
□ V1: GUIパネル幅が600px（Mode 2仕様）
□ V2: クイック追加フォームが横長レイアウトになっている
□ V3: From/Type/Toが横並びに配置されている
□ V4: Previewパネルとの境界（リサイザー4px）が見える
□ V5: 全体が画面幅1920px内に収まる
```

---

### 3.4 Phase 4: 検証（30分）

#### 3.4.1 レイアウト検証チェックリスト

**01_default統合後**:
```
□ R1-1: GUIパネル内で要素の重複がない
□ R1-2: クイック追加フォームが完全に表示されている
□ R1-3: 「追加」「クリア」ボタンがクリック可能な位置にある
□ R1-4: Section 3〜5へのアクセスが維持されている
□ R1-5: 300px幅に収まっている
```

**06_gui_only作成後**:
```
□ R2-1: 600px幅のGUIパネルが正しく配置されている
□ R2-2: Previewパネルとの間隔が適切（リサイザー4px）
□ R2-3: 全体が1920×1080に収まっている
□ R2-4: TD-021（Mode 2仕様）に準拠している
```

#### 3.4.2 整合性検証チェックリスト

```
□ I-1: 00_wireframe_index.mdの記述と一致している
□ I-2: TD-019（2層統合モーダル）への参照が正しい
□ I-3: TD-020（2レベルGUI編集）への参照が正しい
□ I-4: 08_section_input_analysis.mdのD-xx決定と矛盾がない
```

---

## 4. ドキュメント更新（Diff形式）【Part B: 手順】

### 4.1 00_wireframe_index.md更新タイミング

**重要**: 00_wireframe_index.mdの更新は**2段階**で行います。

```
┌─────────────────────────────────────────────────────────────────────┐
│  統合作業                    │  更新タイミング                      │
├─────────────────────────────────────────────────────────────────────┤
│  Phase 2: 01_default統合     │  → 更新A（4箇所）実行               │
│  Phase 3: 06_gui_only作成    │  → 更新B（5箇所）実行               │
│  Phase 4: 検証完了           │  → 最終確認                         │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 更新チェックリスト（2段階）

**更新A: 01_default統合後（3箇所）**

| # | 更新箇所 | 行番号 | 変更内容 |
|:-:|---------|:------:|---------|
| A1 | 01_default説明 | 298-299 | 「07統合済み」追記 + 説明追加 |
| A2 | 07統合記録 | 291-292 | 07ファイルの統合記録追加 |
| A3 | 最終更新日 | 4 | 日付更新（01_default統合） |

**更新B: 06_gui_only作成後（7箇所）**

| # | 更新箇所 | 行番号 | 変更内容 |
|:-:|---------|:------:|---------|
| B1 | 進捗サマリー表 | 69 | 「5完了」→「6完了」 |
| B2 | エディタ詳細 | 77 | 完了リストに06追加、残り3→2 |
| B3 | Phase B表 | 100 | 「5/8完了」→「6/8完了」 |
| B4 | Phase B詳細 | 106 | 次ファイル「07_code_only」に変更 |
| B5 | 8ファイル表 | 225 | 06_gui_only: 🔴→✅ |
| B6 | ファイル構成ツリー | 285 | 06_gui_only: 🔴→✅ |
| B7 | 最終更新日 | 4 | 日付更新（06_gui_only完成） |

**合計: 更新A（3箇所）+ 更新B（7箇所）= 10箇所**

> **Note**: 07_gui_panel_quick_add.excalidraw（統合ソース）と07_code_only.excalidraw（次の作成対象）は別ファイルです。

### 4.3 更新箇所詳細（Diff形式）

#### ■ 更新A: 01_default統合後

**A1: 01_default説明（行298-299）**
```diff
- **01_default（基本状態）✅ 96点**:
+ **01_default（基本状態）✅ 96点（07統合済み）**:
+ > クイック追加フォーム（From/Type/To選択、メッセージ入力、追加/クリアボタン）を07より統合
```

**A2: 07統合記録（行291-292付近に追加）**
```diff
  ├── 06_gui_panel_expansion_strategy.md  # ★GUIパネル拡張戦略書 v1.0
+ ├── 07_gui_panel_quick_add.excalidraw   # ★統合ソース（→01_default, 06_gui_only）
+ ├── 13_wf_integration_procedure_v2.md   # ★WF統合作業手順書 v2.3
```

**A3: 最終更新日（行4）- Phase 2完了時**
```diff
- **最終更新**: 2025-12-30（04_error_state完成✅ 98点、Session 14）
+ **最終更新**: 2025-12-31（01_default 07統合完了、Session XX）
```

#### ■ 更新B: 06_gui_only作成後

**B1: 進捗サマリー表（行69）**
```diff
- | メイン画面 | 4 | 1（8ファイル中5完了） | 80% |
+ | メイン画面 | 4 | 1（8ファイル中6完了） | 80% |
```

> Note: 06_gui_onlyはエディタ画面の一部であり、「画面数」は変わらない。8ファイル中の完了数が変化。

**B2: エディタ詳細（行77）**
```diff
- > - 完了: 01_default✅、...、05_sequence_modal✅ / 残り: 06〜08（3ファイル）
+ > - 完了: 01_default✅、...、05_sequence_modal✅、06_gui_only✅ / 残り: 07〜08（2ファイル）
```

**B3: Phase B表（行100）**
```diff
- | 7 | 4 | **エディタ画面（8ファイル）** | ... | 🟡 **5/8完了** |
+ | 7 | 4 | **エディタ画面（8ファイル）** | ... | 🟡 **6/8完了** |
```

**B4: Phase B詳細（行106）**
```diff
- > **エディタ画面**: ... / 05_sequence_modal✅ / 次は06_gui_only
+ > **エディタ画面**: ... / 05_sequence_modal✅ / 06_gui_only✅ / 次は07_code_only
```

**B5: 8ファイル表（行225）**
```diff
- | 6 | 06_gui_only.excalidraw | Mode 2（GUIのみ） | TD-021 | P2 | 🔴 |
+ | 6 | 06_gui_only.excalidraw | Mode 2（GUIのみ） | TD-021 | P2 | ✅ XX点 |
```

**B6: ファイル構成ツリー（行285）**
```diff
- ├── 06_gui_only.excalidraw          # 🔴 P2: Mode 2（GUIのみ）
+ ├── 06_gui_only.excalidraw          # ✅ P2: Mode 2（GUIのみ）XX点
```

**B7: 最終更新日（行4）- Phase 3完了時**
```diff
- **最終更新**: 2025-12-31（01_default 07統合完了、Session XX）
+ **最終更新**: 2025-12-31（06_gui_only完成✅ XX点、Session XX）
```

### 4.4 更新実行手順（2段階）

**Phase 2完了時（01_default統合後）**:
```
□ Step A1: 00_wireframe_index.mdを開く                   [1分]
□ Step A2: 更新A1（行298-299）を修正                     [2分]
□ Step A3: 更新A2（行291-292）を追加                     [2分]
□ Step A4: 更新A3（行4）を修正                           [1分]
□ Step A5: 保存 → git diff確認                          [2分]
────────────────────────────────────────────────────────
合計: 約8分
```

**Phase 3完了時（06_gui_only作成後）**:
```
□ Step B1: 更新B1（行69）を修正                          [1分]
□ Step B2: 更新B2（行77）を修正                          [2分]
□ Step B3: 更新B3（行100）を修正                         [1分]
□ Step B4: 更新B4（行106）を修正                         [1分]
□ Step B5: 更新B5（行225）を修正                         [1分]
□ Step B6: 更新B6（行285）を修正                         [1分]
□ Step B7: 更新B7（行4）を修正                           [1分]
□ Step B8: 保存 → git diff確認                          [2分]
────────────────────────────────────────────────────────
合計: 約10分
```

**合計: 約18分（Phase 2: 8分 + Phase 3: 10分）**

### 4.5 更新検証チェックリスト

**更新A検証（01_default統合後）**:
```
□ UA-1: 01_default説明に「07統合済み」が追記されている
□ UA-2: 07ファイルの統合記録が追加されている
□ UA-3: 最終更新日が更新されている
□ UA-4: git diffで変更内容を確認済み
```

**更新B検証（06_gui_only作成後）**:
```
□ UB-1: 進捗サマリー表が「6完了」になっている
□ UB-2: エディタ詳細に06_gui_only✅が追加されている
□ UB-3: Phase B表が「6/8完了」になっている
□ UB-4: 次ファイルが「07_code_only」になっている
□ UB-5: 8ファイル表の06_gui_onlyが✅になっている
□ UB-6: ファイル構成ツリーの06_gui_onlyが✅になっている
□ UB-7: 最終更新日が更新されている
□ UB-8: git diffで変更内容を確認済み
```

### 4.6 統合完了報告テンプレート

```markdown
## 統合完了報告

**実施日**: YYYY-MM-DD
**作業者**: [名前]

### 統合結果

| ファイル | パターン | 結果 | 備考 |
|---------|---------|------|------|
| 01_default | P1.5 | ✅/❌ | |
| 06_gui_only | P1 | ✅/❌ | |

### 検証結果

| チェック項目 | 結果 |
|-------------|------|
| R1-1〜R1-5 | ✅/❌ |
| R2-1〜R2-4 | ✅/❌ |
| I-1〜I-4 | ✅/❌ |

### 問題・対処

[問題があれば記載]

### 次のアクション

[次の作業があれば記載]
```

---

## 5. ロールバック手順【Part B: 手順】

### 5.1 ロールバック条件

| 条件 | 判定基準 |
|------|---------|
| R1: レイアウト破綻 | 要素が300px/950px幅を超過、要素重複 |
| R2: 整合性破綻 | TD-019/020/021との矛盾発見 |
| R3: 情報損失 | 既存要素が意図せず削除された |

**具体的エラーケース例**:

| エラー | 症状 | 原因 | 対処 |
|--------|------|------|------|
| E1: 要素重複 | クイック追加ボタンが2つ見える | ペースト後に既存要素を削除し忘れ | 重複要素を選択→Delete |
| E2: 座標ずれ | フォームがGUIパネル外に配置 | オフセット計算ミス | §2.4の座標表で再確認→手動調整 |
| E3: 要素欠落 | 「追加」ボタンが見えない | Step 2で選択漏れ | 07を再度開き、漏れた要素をコピー |
| E4: サイズ変形 | ドロップダウンが縦に潰れている | ペースト時のスケール変更 | Undo (Ctrl+Z) → 再度ペースト |
| E5: 色変化 | ボタン色がオレンジから灰色に | Excalidrawの設定影響 | 07から色コードを確認し手動修正 |

### 5.2 ロールバック実行手順

```
□ Step 1: 現在のファイルを_failedリネーム
          01_default.excalidraw → 01_default_failed_YYYYMMDD.excalidraw

□ Step 2: バックアップから復元
          Copy-Item 04_editor_backup_YYYYMMDD\01_default.excalidraw 04_editor\

□ Step 3: 問題原因を分析・記録
          - 何が失敗したか
          - なぜ失敗したか
          - 次回の対策

□ Step 4: 別パターンで再試行
          - P1.5で失敗 → P2（部分追加）に切り替え
          - P1で失敗 → P1.5（ハイブリッド）に切り替え
```

---

## 6. 成功基準チェックリスト【Part C: 検証】

### 6.1 統合完了の必須条件

```
□ C1: 01_defaultのGUIパネルにクイック追加フォームが表示される
□ C2: From/Type/To選択UIが機能する位置に配置されている
□ C3: 「追加」「クリア」ボタンが視認可能
□ C4: 「シーケンス編集を開く →」ボタンが配置されている
□ C5: 06_gui_onlyが新規作成されている
□ C6: 06_gui_onlyでMode 2（950px）レイアウトが実現されている
□ C7: 00_wireframe_index.mdが更新されている
□ C8: すべての検証チェックリストがパスしている
```

### 6.2 品質基準

| 項目 | 基準 |
|------|------|
| 座標精度 | ±2px以内 |
| 要素サイズ | 07と同一 |
| カラー | 07と同一（#2196F3, #E65100等）|
| フォント | 07と同一（fontSize: 11-14） |

---

## 付録A: D-xxグループと影響ファイル対応表【Part D: 付録】

| グループ | D-xx範囲 | 対応機能 | 影響ファイル |
|---------|---------|---------|-------------|
| A | D-1〜D-8 | セクション構成 | 全ファイル |
| B | D-9〜D-17 | インタラクション | 01, 02 |
| C | D-18〜D-46 | ノート・グループUI | 01, 05 |
| D | D-47〜D-56 | 表示方式 | 01, 06 |
| E | D-57〜D-68 | カードアクション | 01, 02 |
| F | D-69〜D-78 | Divider | 01 |
| G | D-79〜D-91 | AIチャット | 03, 08 |
| H | D-92〜D-100 | 検索・置換 | 01 |

---

## 付録B: 詳細度スコア計算シート

```
07_gui_panel_quick_add.excalidraw の詳細度評価:

□ 1. 要素数          (07 > 00×1.5?)    10/10点 ✅ 多数の要素
□ 2. D-xx対応        (D-xx番号明記?)   0/10点  ❌ 要素にD-xx未記載
□ 3. サイズ指定      (px単位指定?)     10/10点 ✅ 座標・サイズ明記
□ 4. 状態バリエーション (hover等?)     0/10点  ❌ 状態なし
□ 5. インタラクション (動作記述?)      5/10点  △ 一部（ドロップダウン）
□ 6. TypeScript定義  (interface?)      0/10点  ❌ なし
□ 7. モード対応      (300/950px?)      10/10点 ✅ Mode 1/2両方
□ 8. エラー状態      (エラーUI?)       0/10点  ❌ なし
□ 9. アクセシビリティ (ARIA等?)        0/10点  ❌ なし
□ 10. 注釈・コメント (設計意図?)       5/10点  △ タイトルのみ
───────────────────────────────────────────────
                           合計:       40/100点

→ 判定: P1.5（ハイブリッド）パターン適用
```

---

*このドキュメントは07および01_defaultの実データ確認に基づき作成されました。*

**バージョン履歴**:
| バージョン | 評価 | 主な変更 |
|:----------:|:----:|---------|
| v1.0 | 82点 | 初版作成 |
| v1.1 | 91点 | 01_default構成追加、Mode 2要素追加、Diff形式 |
| v1.2 | 95点 | Step別時間見積もり、視覚確認チェックリスト、エラーケース例 |
| v1.3 | 97点 | Mode 2座標変換表、Part構成明確化 |
| v1.4（最終版） | 97点 | §4完全改訂: 2段階更新（A/B）、10箇所網羅、実行手順分離 |

*v2.4（最終版）- §4更新手順の3回フィードバックループを経て完成*
