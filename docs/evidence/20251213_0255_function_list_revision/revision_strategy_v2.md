# 機能一覧表 改訂戦略 v2.0（詳細版）

**作成日**: 2025-12-13
**目的**: 非エンジニア向けに機能一覧表を改訂するための戦略文書

---

## 1. 対象読者の本質的理解

「スキルアップを目指している非エンジニア」という条件を深掘りする。

```
この読者は「初心者」ではない。「学習者」である。

【この読者の特徴】
✓ 専門用語を「排除」されたくない（学びたいから）
✓ しかし「いきなり専門用語」では挫折する
✓ 「なぜこれが必要か」の文脈を求めている
✓ 最終的には実務で使えるレベルを目指している

【この読者が嫌うこと】
✗ 子供扱い（過度な簡略化）
✗ 専門用語の説明なしの乱用
✗ 「わかる人だけわかればいい」という空気
✗ どこから読めばいいかわからない構造
```

---

## 2. 改訂の核心原則

| 原則 | 内容 | 具体的手法 |
|------|------|-----------|
| **削らない、足す** | 技術詳細は維持し、理解の補助を追加 | 概要レイヤーの新設、用語集の追加 |
| **段階的開示** | 概要→詳細→技術仕様の3段階 | `<details>`による折りたたみ |
| **文脈優先** | 「何か」の前に「なぜ必要か」 | 各機能に「この機能が解決する問題」を追加 |
| **アナロジー活用** | 技術概念を日常の例えで補足 | 用語集に「例えると」欄を追加 |
| **視覚化強化** | テキストの壁を図で分断 | Mermaid図、アイコン、色分け |

---

## 3. ドキュメント構造の再設計

### 3.1 現状構造の問題点

```
現状: フラットで技術者向け
┌────────────────────────────────┐
│ 概要                           │ ← いきなり「DFD対比」等の専門語
│ 0. 共通定義（エラーコード）     │ ← TypeScriptコードが冒頭に
│ 凡例                           │ ← UC, BF, DFD の略語定義のみ
│ 1〜5. 機能詳細                  │ ← 全機能が同じ粒度で並列
│ 6〜13. 技術セクション           │
└────────────────────────────────┘
```

### 3.2 改訂後の構造

```
改訂後: 読者レベル別に入口を分離
┌────────────────────────────────────────────────────────────┐
│ 🏠 Part 0: ナビゲーション（新設）                          │
│   ├── この資料について（目的、対象読者、読み方）           │
│   ├── システム全体像（1枚の絵で理解）                      │
│   └── 用語集（3階層: 基本→中級→技術）                     │
├────────────────────────────────────────────────────────────┤
│ 🔧 Part 1: 機能一覧（改訂）                                │
│   ├── 各カテゴリ冒頭に「このカテゴリでできること」         │
│   └── 各機能を3層構造（概要/操作/技術詳細）で記述          │
├────────────────────────────────────────────────────────────┤
│ 📊 Part 2: 全体整合性（図解強化）                          │
│   ├── 業務フロー対比（フロー図で視覚化）                   │
│   └── カバレッジ（進捗バー等で可視化）                     │
├────────────────────────────────────────────────────────────┤
│ ⚙️ Part 3: 技術リファレンス（現状維持）                    │
│   └── 共通定義、非機能要件、依存関係、リスク等             │
└────────────────────────────────────────────────────────────┘
```

---

## 4. 用語集の詳細設計

用語集は**学習教材**として設計する。単なる辞書ではない。

### 4.1 構造

```markdown
## 📚 用語集

### この用語集の使い方

- 🔰 **基本用語**: 最初に理解すべき用語（約15語）
- 🔗 **連携用語**: 機能間の関係を理解する用語（約20語）
- 💻 **技術用語**: エンジニアリングの詳細を学ぶ用語（約30語）

本文中で `用語名` のように表記されている言葉はこの用語集で解説しています。
```

### 4.2 各用語の記述フォーマット

```markdown
---

#### 🔰 OAuth（オーオース）

| 区分 | 内容 |
|------|------|
| **一言で** | 他のサービスのアカウントを借りてログインする仕組み |
| **例えると** | ホテルのフロントで「○○会社の社員証をお持ちですか？」と聞かれ、見せると部屋に入れるようなもの |
| **なぜ必要？** | サービスごとにパスワードを作ると覚えきれないし、漏洩リスクも増える。既に信頼しているGitHub/Googleの認証を「借りる」ことで、安全かつ便利に |
| **本資料での登場** | F-AUTH-01（ログイン）、F-AUTH-02（ログアウト） |

**動作イメージ**:
あなた → 「このアプリを使いたい」
    ↓
アプリ → 「GitHubさん、この人は本物ですか？」
    ↓
GitHub → あなたに「このアプリにアクセスを許可しますか？」
    ↓
あなた → 「許可します」
    ↓
GitHub → アプリに「この人は本物です。名前とメールアドレスを教えます」
    ↓
アプリ → 「ようこそ！」

**関連用語**: → PKCE, → JWT, → アクセストークン
```

### 4.3 用語分類案

| 階層 | 用語例 | 数 |
|------|--------|:--:|
| **🔰 基本** | ログイン、セッション、プロジェクト、図表、保存、エクスポート、プレビュー、テンプレート、バリデーション、エラー | 15 |
| **🔗 連携** | OAuth、認証/認可、API、Storage、データベース、リトライ、フォールバック、UUID | 20 |
| **💻 技術** | PKCE、JWT、DFD、データフロー、ユースケース、ENUM、VARCHAR、Supabase、pgvector、Embedding | 30 |

---

## 5. 機能説明の改訂テンプレート

### 5.1 テンプレート構造

```markdown
---

### F-{カテゴリ}-{番号}: {機能名}

#### 📌 この機能について

> **ひとことで**: {1文で機能を説明}

| 項目 | 内容 |
|------|------|
| **何ができる？** | {ユーザー視点での説明} |
| **誰が使う？** | {対象ユーザー} |
| **いつ使う？** | {利用シーン} |
| **前提条件** | {事前に必要なこと} |

#### 🎬 操作の流れ

{Mermaid図}

**ステップ**:

| # | 操作 | 画面の様子 |
|:-:|------|-----------|
| 1 | {操作内容} | {画面状態} |
| 2 | ... | ... |

#### ✅ 成功すると

- {成功時の状態1}
- {成功時の状態2}

#### ⚠️ うまくいかない時

| こんな時 | 画面に表示されるメッセージ | 対処法 |
|---------|---------------------------|--------|
| {状況} | {メッセージ} | {対処} |

---

<details>
<summary>📘 技術詳細を見る（クリックで展開）</summary>

{現在の詳細内容をすべて維持}

</details>

---
```

---

## 6. 視覚要素の統一ルール

| 要素 | 用途 | 例 |
|------|------|-----|
| 📌 | 機能の概要セクション | 「📌 この機能について」 |
| 🎬 | 操作フローセクション | 「🎬 操作の流れ」 |
| ✅ | 成功時の状態 | 「✅ 成功すると」 |
| ⚠️ | エラー・注意事項 | 「⚠️ うまくいかない時」 |
| 📘 | 技術詳細（折りたたみ） | 「📘 技術詳細を見る」 |
| 🔰 | 基本用語 | 用語集で使用 |
| 🔗 | 連携用語 | 用語集で使用 |
| 💻 | 技術用語 | 用語集で使用 |

**優先度の色分け**（サマリ表で使用）:

| 優先度 | 色 | 意味 |
|--------|-----|------|
| MVP | 🔵 青 | 最初のリリースで必須 |
| Phase 2 | 🟢 緑 | 次のリリースで追加 |
| v3 | 🟠 オレンジ | 将来追加予定 |

---

## 7. 実装計画

### Phase 1: 基盤整備（推奨: 最初に実施）

| タスク | 内容 | 成果物 |
|--------|------|--------|
| 1-1 | 読み方ガイド作成 | 「この資料について」セクション |
| 1-2 | システム全体像の図解 | Mermaid図 1枚 |
| 1-3 | 用語集（Tier 1: 基本用語15語） | 用語集セクション |

### Phase 2: テンプレート確立（1機能で検証）

| タスク | 内容 | 成果物 |
|--------|------|--------|
| 2-1 | F-AUTH-01（ログイン）を完全改訂 | 3層構造のサンプル |
| 2-2 | フィードバック収集 | 改訂方針の確定 |
| 2-3 | テンプレートMarkdown確定 | 再利用可能なテンプレート |

### Phase 3: MVP機能の改訂（14機能）

| カテゴリ | 機能数 | 対象 |
|---------|:------:|------|
| 認証 | 2 | F-AUTH-01, 02 |
| プロジェクト管理 | 4 | F-PRJ-01〜04 |
| 図表操作 | 6 | F-DGM-01〜06, 09 |
| AI機能 | 1 | F-AI-01 |
| 管理機能 | 7 | F-ADM-01〜05, 07, 08, 13 |

### Phase 4: Phase 2機能の改訂（16機能）

### Phase 5: 仕上げ

| タスク | 内容 |
|--------|------|
| 5-1 | 業務フロー対比表の図解化 |
| 5-2 | 用語集（Tier 2, 3）の追加 |
| 5-3 | 全体整合性確認 |
| 5-4 | 目次・ナビゲーションの最終調整 |

---

## 8. リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| **ドキュメントサイズの肥大化** | 読み込み時間増、管理コスト増 | 技術詳細は`<details>`で折りたたみ、概要レイヤーは簡潔に |
| **更新の二重管理** | 概要と詳細の乖離 | テンプレート化して更新箇所を明確化、チェックリスト作成 |
| **用語集と本文の乖離** | 用語集を見ない読者への効果減 | 本文初出時に「`OAuth`（→用語集）」形式で参照を促す |
| **Mermaid図の互換性** | 一部環境で表示されない | PNG/SVGへのフォールバックを用意 |

---

## 9. 推奨する進め方

```
【推奨フロー】

Step 1: サンプル作成（Phase 2-1）
    ↓
    F-AUTH-01（ログイン）を改訂テンプレートで書き直す
    ↓
Step 2: レビュー
    ↓
    読みやすさ、情報の過不足を確認
    ↓
Step 3: 基盤整備（Phase 1）
    ↓
    用語集・読み方ガイドを作成
    ↓
Step 4: 全体展開（Phase 3〜5）
    ↓
    残り機能を順次改訂
```

**最初のアクションとしての推奨**:
**F-AUTH-01（ログイン）のサンプル改訂** を作成し、方向性を確認する。

---

## 変更履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2025-12-13 | 1.0 | 初版作成 |
